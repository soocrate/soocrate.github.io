{"version":3,"sources":["components/pages/Storage.module.css","components/pages/NewDocument.module.css","App.module.css","../../jquery-crate/node_modules/lseqtree/node_modules/BigInt/src sync","components/pages/Configuration.module.css","../../jquery-crate/src/helpers/randomID.js","../../jquery-crate/src/helpers/ErrorHandler.js","../../jquery-crate/src/communication/Event.js","../../jquery-crate/src/communication/MarkerManager/MarkerEvent.js","../../jquery-crate/src/communication/MarkerManager/PingManager.js","../../jquery-crate/src/communication/MarkerManager/CaretManager.js","../../jquery-crate/src/communication/MarkerManager/MarkerManager.js","../../jquery-crate/src/communication/TextManager/TextEvent.js","../../jquery-crate/src/communication/TextManager/AntiEntropyManager.js","../../jquery-crate/src/communication/TextManager/InsertManager.js","../../jquery-crate/src/communication/TextManager/RemoveManager.js","../../jquery-crate/src/communication/TextManager/TitleManager.js","../../jquery-crate/src/communication/TextManager/TextManager.js","../../jquery-crate/src/communication/Communication.js","../../jquery-crate/src/Document.js","../../jquery-crate/src/DocumentBuilder.js","../../jquery-crate/src/main.js","reducers/index.js","store/index.js","components/pages/Converter.js","components/pages/Home.js","components/pages/About.js","components/actions/configuration.js","components/pages/Configuration.js","components/pages/NewDocument.js","components/pages/Publications.js","components/pages/Storage.js","components/pages/ContactUs.js","components/Snackbar.js","App.js","serviceWorker.js","index.js","../../jquery-crate/src/view/link.js","../../jquery-crate/src/view/statesheader.js","../../jquery-crate/src/view/comments.js","../../jquery-crate/src/view/QuillManger.js","../../jquery-crate/src/view/MarkerViewManager.js","../../jquery-crate/src/view/editor.js","../../jquery-crate/src/view/CrateDecorator.js","../../jquery-crate/src/View.js","../../jquery-crate/src/view/marker.js"],"names":["module","exports","root","table","tableWrapper","document","logo","webpackEmptyContext","req","e","Error","code","keys","resolve","id","card","submit","button","textField","avatar","__webpack_require__","d","__webpack_exports__","GUID","shortid__WEBPACK_IMPORTED_MODULE_0__","shortid__WEBPACK_IMPORTED_MODULE_0___default","n","a","generate","characters","ErrorHandler_ErrorHandler","ErrorHandler","Object","classCallCheck","this","createClass","key","value","index","message","concat","_len","arguments","length","args","Array","_key","getError","apply","name","MyError","_Error","_getPrototypeOf2","_this","_len3","_key3","possibleConstructorReturn","getPrototypeOf","call","captureStackTrace","assertThisInitialized","constructor","stack","inherits","wrapNativeSuper","_len2","_key2","construct","debug","Event_Event","_EventEmitter","Event","opts","_buffer","_document","_communicationChannel","_communication","_data_comm","_name","EventName","on","getType","msg","pairs","receiveBuffer","console","error","action","setLastChangesTime","objectSpread","event","_this2","causal","undefined","clearTimeout","_timeoutBuffer","push","causalId","getCausalId","setTimeout","getPacket","broadcastStream","stream","broadcast","_causality","increment","streamBroadcast","sendStream","formatId","unicastStream","cleanId","fixedPart","slice","varPart","removeFromString","StringtoBeremove","s","indexOfLast","lastIndexOf","streamUnicast","maxSize","msgString","JSON","stringify","chunkSubstr","forEach","chunk","write","end","_this3","_source","getNeighbours","neighbourId","unicast","_ref","_this4","originID","elem","passMsgByBroadcast","receive","warn","pair","packet","isReady","getBroadcastMessageFormat","_protocol","_receive","lastSentMsgId","send","sendUnicast","element","_shouldStopPropagation","emit","str","size","numChunks","Math","ceil","chunks","i","o","substr","lseqNode","t","c","protocol","payload","events","MarkerEvent_MarkerEvent","_Event","MarkerEvent","_behaviors_comm","_defaultOptions","lifeTime","range","cursor","isItMe","PingManager_PingManager","_MarkerEvent","PingManager","_startTimer","_pingPeriod","PingPeriod","startPing","interval","setInterval","user","clearInterval","pseudo","stopPing","CaretManager_CaretManager","CaretManager","uid","MarkerManager_debug","MarkerManager_MarkerManager","MarkerManager","_pingManager","_caretManger","caretMoved","close","TextEvent_TextEvent","TextEvent","_sequence","sequence","LSEQID","_s","_c","AntiEntropyManager_debug","AntiEntropyManager_AntiEntropyManager","_TextEvent","AntiEntropyManager","_antiEntropyPeriod","AntiEntropyPeriod","_textManager","TextManager","receiveRequest","receiveResponse","sendAntiEntropyRequest","startAntiEntropy","type","causality","localVVwE","clone","remoteVVwE","vvwe_default","fromJSON","antiEntropyPeriod","missingLSEQIDs","vector","arr","localEntry","remoteEntryIndex","indexOf","remoteEntry","missingLSEQIDsEntry","getMissingLSEQIDs","prototype","elements","getElements","sendAntiEntropyResponse","log","sendAction","start","v","j","x","_e","_j","except","toSearch","lseqNodes","getLSEQNodes","isIdInSet","clock","LSEQNodeArray","preorder","node","children","child","_ref2","_toSearch$j","_ref3","causalityAtReceipt","elems","getCausalID","authorID","split","haveBeenReceived","antientropy","merge","_this5","delta","_intervalAntiEntropy","_options","editingSessionID","sendLocalBroadcast","origin","stopAntiEnropy","InsertManager_debug","InsertManager_InsertManager","InsertManager","insert","_lastSentId","position","_ref$source","source","isItConvertibleToJSON","insertLSEQ","ops","splice","content","attributes","pei","_get","qei","alloc","applyInsert","_ref2$antientropy","parse","insertMsg","RemoveManager_debug","RemoveManager_RemoveManager","RemoveManager","remove","_pairs","reference","removeFromSequence","subCounter","applyRemove","TitleManager_debug","TitleManager_TitleManager","TitleManager","sendChangeTitle","title","TextManager_TextManager","_insertManager","_removeManager","_titleManager","_antiEntropyManager","_removeBuffer","Map","set","hashCode","has","delete","Communication_debug","Communication_Communication","Communication","_foglet","markerManager","textManager","_initConnection","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","foglet","connection","share","setCommunicationChannels","stop","foglet_core","overlay","network","routeMsgToEvents","communicatioChannel","onBroadcast","onUnicast","onStreamBroadcast","receiveStream","onStreamUnicast","data","unshare","_networkManager","_rps","disconnect","Document_debug","Document_Document","Document","options","documentIndex","crate","documentId","signalingOptions","session","_lastChanges","Date","getTime","documentActiveWatcher","state","_init","View","initConnection","display","Promise","then","bind","sent","_view","containerID","lseqtree_default","local","initModules","broadcastCaret","rps","importFromJSON","loadFromJSON","init","refreshDocument","documentActivityWatcher","documentActivityTimeout","object","getDeltaFromSequence","date","_editor","viewEditor","editor","webRTCOptions","markers","store","refreshDocumentTimeout","getSelection","setContents","setSelection","updateCommentsLinks","WhoWriteIt","LSEQNodes","op","color","marker","getColor","removeDocument","moveToNext","moveToPrevious","createNewDocument","DocumentBuilder_DocumentBuilder","DocumentBuilder","defaultOptions","_crate","_buildDocument","sessionId","sessionIndex","specialOpts","doc","_args","prepareOptions","getNewFoglet","abrupt","_x","_x2","_prepareOptions","_callee2","_context2","setSignalingOptions","getLocalStorageData","setWebRTCOptions","setUser","setDocumentTitle","setTemporarySessionID","setFogletOptions","setDocumentActivityTimeout","_x3","_x4","_editingSessionID","randomID","randomId","localStorageUser","store_legacy_default","get","config","assign","_setWebRTCOptions","_callee3","defaultICE","twilioICEs","iceServers","_context3","url","stun","urls","getICEs","trickle","wrtc","_x5","_getICEs","_callee4","_context4","reject","ICEsURL","browser_default","resp","json","addresses","ICEs","ice","map","_x6","address","storageServer","sessionID","userId","room","webrtc","fogletOptions","verbose","getRpsOptions","signalingServer","defaultRps","maxPeers","b","timeout","pendingTimeout","signaling","main_Crate","Crate","documentBuilder","_documents","_documentsIds","actualSessionIndex","window","from","getIndexFromDocumentId","_createNewDocument","_documentIndex","getNumberOfDocuments","buildDocument","addDocument","setActualDocument","updateView","exist","SESSION_NOT_FOUND","getDocumentIndexs","filter","getDocument","getDocumentIdFromIndex","updateActualDocumentIndex","removedIndex","focusInToDocument","focusOutToDocument","moveTo","Marker","require","getRandomId","getPseudoname","stunTurn","initialState","configuration","rootReducer","createStore","showdown","Converter","markdown","makeHtml","Home","react_default","createElement","className","dangerouslySetInnerHTML","__html","getHtmlFromMarkDown","getMarkDownContent","Component","About","updateConfiguration","Configuration","props","styles","container","noValidate","autoComplete","Card_default","CardContent_default","Typography_default","variant","component","gutterBottom","Grid_default","spacing","item","xs","TextField_default","disabled","label","style","margin","placeholder","helperText","fullWidth","onChange","setState","target","InputLabelProps","shrink","getAvatar","CardActions_default","Button_default","onClick","pseudoName","htmlFor","React","connect","dispatch","bindActionCreators","NewDocument","match","params","defaultConfig","getConfig","initCrate","Publications","dateFormat","desc","orderBy","rows","numeric","disablePadding","listDocuments","documents","each","includes","link","EnhancedTableHead","createSortHandler","property","onRequestSort","_this$props","onSelectAllClick","order","numSelected","rowCount","TableHead_default","TableRow_default","TableCell_default","padding","Checkbox_default","indeterminate","checked","row","sortDirection","Tooltip_default","placement","enterDelay","TableSortLabel_default","active","direction","EnhancedTableToolbar","classes","selected","updateParent","Toolbar_default","classNames","defineProperty","highlight","spacer","actions","IconButton_default","aria-label","Delete_default","FilterList_default","withStyles","theme","paddingRight","unit","palette","secondary","main","backgroundColor","lighten","light","text","primary","dark","flex","EnhancedTable","handleRequestSort","handleSelectAllClick","handleClick","selectedIndex","newSelected","handleChangePage","page","handleChangeRowsPerPage","rowsPerPage","isSelected","update","_this$state","emptyRows","min","Paper_default","Storage_EnhancedTableToolbar","Table_default","aria-labelledby","Storage_EnhancedTableHead","TableBody_default","array","cmp","stabilizedThis","el","sort","stableSort","getSorting","hover","role","aria-checked","tabIndex","scope","Link","to","height","colSpan","TablePagination_default","count","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","ContactUs","success","green","info","warning","amber","icon","fontSize","iconVariant","opacity","marginRight","alignItems","PositionedSnackbar","open","handleClose","prevProps","prevState","snapshot","Snackbar_default","autoHideDuration","anchorOrigin","vertical","horizontal","onClose","ContentProps","aria-describedby","PersistentDrawerLeft","handleDrawerOpen","handleDrawerClose","HashRouter","CssBaseline_default","AppBar_default","appBar","appBarShift","disableGutters","menuButton","hide","Menu_default","styleCss","font-size","version","Drawer_default","drawer","anchor","paper","drawerPaper","drawerHeader","ChevronLeft_default","ChevronRight_default","Divider_default","List_default","ListItem_default","ListItemIcon_default","Home_default","ListItemText_default","Storage_default","AddCircle_default","Build_default","Info_default","LibraryBooks_default","ContactMail_default","contentShift","Switch","Route","exact","path","render","Redirect","LocalStorage","components_Snackbar","background","transition","transitions","create","easing","sharp","duration","leavingScreen","width","marginLeft","easeOut","enteringScreen","flexShrink","mixins","toolbar","justifyContent","margin-top","flexGrow","withTheme","Boolean","location","hostname","ReactDOM","es","App","getElementById","navigator","serviceWorker","ready","registration","unregister","link_LinkView","LinkView","linkContainer","jQuery","appendTo","css","attr","qrCodeModal","addClass","qrCodeModalDialog","qrCodeModalContent","qrcodeCanvas","append","alert","dismiss","html","rowContainer","inputGroup","input","inputGroup2","qrcode","self","unbind","click","show","val","printLink","removeClass","removeAttr","askLink","statesheader_StatesHeader","StatesHeader","model","linkView","shareView","editorContainerID","startSharingText","startSharingTooltip","stopSharingText","stopSharingTooltip","red","yellow","blue","_editorContainerID","networkState","$","tippy_standalone","delay","arrow","sharingContainer","href","join","jsSocials","replace","showLabel","showCount","shares","prepend","copyToClipboard","interactive","querySelector","setNetworkState","Infinity","dummy","body","appendChild","setAttribute","select","execCommand","removeChild","comments_Comments","Comments","_commentCallback","commentAddClick","commentsClick","_authorId","_viewEditor","_markerManager","_MarkerViewManager","setSelectors","commentOpt","modules","comment","commentAuthorId","commentAddOn","getMarker","animal","colorRGB","_inputCommentModel","_comments","_ql_editor","_commentInput","cb","modal","round","is","hasClass","_addCommentToList","currentTimestamp","authorId","divId","cmtBox","addMarker","lifetime","iconURL","getCommentBoxDiv","addFocusEffects","focusin","commentBoxFocus","focusout","_saveComment","getCurrentTimestamp","addCommentToList","find","clearComments","commentAuthor","commentTimestamp","empty","Editor","QuillManger_QuillManager","QuillManager","comments","Quill","register","QuillCursors","QuillComment","quill_image_drop_module","registerModules","quill","formula","getToolbarOptions","handlers","subdocument","preview","tooltip","edit","undo","history","redo","cursors","getCursorModuleOptions","getHistoryModuleOptions","getCommentsModuleOptions","imageDrop","addExtraToolbarOptions","save2","save","convertLocalLinks","header","font","align","list","autoRegisterListener","hideDelay","hideSpeed","maxStack","enabled","top","MarkerViewManager_debug","MarkerViewManager_MarkerViewManager","MarkerViewManager","_markers","receivePing","receiveCaret","hasOwnProperty","view_marker","setPseudo","editor_debug","editor_EditorController","EditorController","_sessionID","_quillManager","getQuill","loadDocument","initCommunicationModules","loadLocalContent","addAuthorInformation","UpdateComments","startEventListeners","oldRange","oldDelta","textChange","indexp","remoteInsert","remoteRemove","applyChanges","iniRetain","getOperations","operation","sendIt","isItInsertWithAtt","Name","sendFormat","sendInsert","sendDelete","getNextIndex","nextIndex","Type","Value","Attributes","getOwnPropertyNames","found","att","getDelta","isItComplete","opp","Operation","sendCharByChar","Length","getFormat","insertText","removeFormat","insertEmbed","formatLine","formatText","deleteText","_timeout","_this6","toArray","updateLink","l","_this7","linksToCrate","links","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","changesDelta","_this8","extractOperationInformation","getTypeOfContent","video","image","CrateDecorator_CrateDecorator","CrateDecorator","addMoveShortcuts","codes","37","39","addEventListener","keyCode","ctrlKey","metaKey","evt","createEvent","initEvent","dispatchEvent","preventDefault","Resize","resize","resizeTimeout","View_View","editorsContainerID","_editorsHolderID","focusIn","focusOut","NumberOfDocuments","createCRATE","_storageServerState","findremote","_timerStorageServer","addResize","initDocument","stopPropagation","closeDocument","saveDocument","changeTitle","sharingLinkContainer","shareButton","_statesHeader","getWidth","saveComment","kill","scrollWidth","moveToIndex","moveToDocumentId","animate","scrollLeft","offset","left","focus","numberOfDocuments","timer","firsttime","remotesave","fetch","results","unpin","pin","catch","thrownError","ajax","status","async","confirm","C_Users_haouari_n_Desktop_CrateV2_reactcrate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","C_Users_haouari_n_Desktop_CrateV2_reactcrate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","animals__WEBPACK_IMPORTED_MODULE_2__","animals__WEBPACK_IMPORTED_MODULE_2___default","string_hash__WEBPACK_IMPORTED_MODULE_3__","string_hash__WEBPACK_IMPORTED_MODULE_3___default","isItME","time","colorRGBLight","avatarAdd","addAvatar","addCursor","getModule","moveCursor","timeNow","removeCursor","removeAvatar","divID","checkIfOutdated","subDomain","Pseudo","setCursor","charAt","toUpperCase","format","h1","h2","h3","floor","capitalize","words"],"mappings":"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","file":"static/js/main.df25ea49.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Storage_root__12xUB\",\"table\":\"Storage_table__3F5YM\",\"tableWrapper\":\"Storage_tableWrapper__1hb1n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"document\":\"NewDocument_document__3aIU9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"App_logo__2xcQf\"};","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 277;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Configuration_card__MXNHL\",\"submit\":\"Configuration_submit__1rjev\",\"button\":\"Configuration_button__3bv20\",\"textField\":\"Configuration_textField__3OPwN\",\"avatar\":\"Configuration_avatar__104bh\"};","import shortid from 'shortid';\nshortid.characters('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-');\nexport function GUID() {\n  return 'c' + shortid.generate();\n}","import _construct from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/construct\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _wrapNativeSuper from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/wrapNativeSuper\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nexport var ErrorHandler =\n/*#__PURE__*/\nfunction () {\n  function ErrorHandler() {\n    _classCallCheck(this, ErrorHandler);\n  }\n\n  _createClass(ErrorHandler, [{\n    key: \"SESSION_NOT_FOUND\",\n    value: function SESSION_NOT_FOUND(index) {\n      var name = 'SESSION_NOT_FOUND';\n      var message = \"Session ID \".concat(index, \" Not found in CRATE\");\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return this.getError.apply(this, [name, message].concat(args));\n    }\n  }, {\n    key: \"getError\",\n    value: function getError(name, message) {\n      var MyError =\n      /*#__PURE__*/\n      function (_Error) {\n        _inherits(MyError, _Error);\n\n        function MyError(name, message) {\n          var _getPrototypeOf2;\n\n          var _this;\n\n          _classCallCheck(this, MyError);\n\n          for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            args[_key3 - 2] = arguments[_key3];\n          }\n\n          _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MyError)).call.apply(_getPrototypeOf2, [this, message].concat(args)));\n          _this.name = name;\n          _this.message = message;\n\n          if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(_assertThisInitialized(_assertThisInitialized(_this)), _this.constructor);\n          } else {\n            _this.stack = new Error(message).stack;\n          }\n\n          return _this;\n        }\n\n        return MyError;\n      }(_wrapNativeSuper(Error));\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      return _construct(MyError, [name, message].concat(args));\n    }\n  }]);\n\n  return ErrorHandler;\n}();","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { EventEmitter } from 'events';\n\nvar debug = require('debug')('CRATE:Event');\n\nexport var Event =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(Event, _EventEmitter);\n\n  function Event(opts) {\n    var _this;\n\n    _classCallCheck(this, Event);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Event).call(this));\n    _this._buffer = [];\n    _this._document = opts.document;\n    _this._communicationChannel = _this._document._communication._data_comm;\n    _this._name = opts.EventName;\n\n    _this._document.on(_this.getType(), function (msg) {\n      if (msg && msg.pairs) {\n        _this.receiveBuffer(msg);\n      } else if (msg) {\n        _this.receiveBuffer({\n          pairs: [msg]\n        });\n      } else {\n        console.error('Receive Event without data', _this.getType());\n      }\n    });\n\n    _this._document.on(\"\".concat(_this._name, \"_Action_Event\"), function (msg) {\n      debug(\"on \\\"\".concat(_this._name, \"_Action_Event\\\"\"));\n\n      _this.action(msg);\n    });\n\n    return _this;\n  }\n\n  _createClass(Event, [{\n    key: \"getEncapsulatedMessage\",\n    value: function getEncapsulatedMessage(msg) {}\n  }, {\n    key: \"setLastChangesTime\",\n    value: function setLastChangesTime() {\n      this._document.setLastChangesTime();\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      if (this._name) {\n        return \"\".concat(this._name, \"_Event\");\n      } else {\n        console.error('Event without name');\n      }\n    }\n  }, {\n    key: \"getPacket\",\n    value: function getPacket(message) {\n      return _objectSpread({\n        event: this.getType()\n      }, message);\n    }\n  }, {\n    key: \"broadcast\",\n    value: function broadcast(message) {\n      var _this2 = this;\n\n      var causal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      clearTimeout(this._timeoutBuffer);\n\n      this._buffer.push(_objectSpread({}, message, {\n        causalId: this.getCausalId()\n      }));\n\n      this._timeoutBuffer = setTimeout(function () {\n        var msg = _this2.getPacket({\n          pairs: _this2._buffer\n        });\n\n        _this2.broadcastStream(_objectSpread({}, msg, {\n          stream: causal\n        }));\n\n        debug('broadcast message', msg);\n        _this2._buffer = [];\n      }, 1);\n    }\n  }, {\n    key: \"getCausalId\",\n    value: function getCausalId() {\n      var causalId = this._communicationChannel.broadcast._causality.increment();\n\n      return causalId;\n    }\n  }, {\n    key: \"broadcastStream\",\n    value: function broadcastStream(msg) {\n      var stream = this._communicationChannel.streamBroadcast();\n\n      this.sendStream(stream, msg);\n    }\n  }, {\n    key: \"unicast\",\n    value: function unicast(id, message) {\n      var causal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var causalId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n      if (!causalId) {\n        causalId = this.getCausalId();\n      }\n\n      var msg = this.getPacket({\n        pairs: [_objectSpread({}, message, {\n          causalId: causalId\n        })]\n      });\n      id = this.formatId(id);\n      this.unicastStream(id, _objectSpread({}, msg, {\n        stream: causal\n      }));\n    }\n  }, {\n    key: \"formatId\",\n    value: function formatId(id) {\n      debug('Id before formatiting', id);\n      var cleanId = this.cleanId(id);\n      cleanId = cleanId + '-I';\n      debug('Id after formatiting', cleanId);\n      return cleanId;\n    }\n  }, {\n    key: \"cleanId\",\n    value: function cleanId(id) {\n      var fixedPart = id.slice(0, id.length - 4);\n      var varPart = id.slice(id.length - 4, id.length);\n      varPart = this.removeFromString('-I', varPart);\n      varPart = this.removeFromString('-O', varPart);\n      return fixedPart + varPart;\n    }\n  }, {\n    key: \"removeFromString\",\n    value: function removeFromString(StringtoBeremove, s) {\n      var indexOfLast = s.lastIndexOf(StringtoBeremove);\n\n      if (indexOfLast >= 0) {\n        s = s.slice(0, indexOfLast) + s.slice(indexOfLast + StringtoBeremove.length);\n      }\n\n      return s;\n    }\n  }, {\n    key: \"unicastStream\",\n    value: function unicastStream(id, msg) {\n      debug('message sent on stream unicast');\n\n      var stream = this._communicationChannel.streamUnicast(id);\n\n      this.sendStream(stream, msg);\n    }\n  }, {\n    key: \"sendStream\",\n    value: function sendStream(stream, msg) {\n      var maxSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10000;\n      var msgString = JSON.stringify(msg);\n      var chunks = this.chunkSubstr(msgString, maxSize);\n      chunks.forEach(function (chunk) {\n        stream.write(chunk);\n      });\n      stream.end();\n    }\n  }, {\n    key: \"sendLocalBroadcast\",\n    value: function sendLocalBroadcast(msg) {\n      var _this3 = this;\n\n      //msg=this.setBatchCounter({pairs:[msg]})\n      this._communicationChannel.broadcast._source.getNeighbours().forEach(function (neighbourId) {\n        return _this3.unicast(neighbourId, msg, false, _this3.getCausalId());\n      });\n    }\n  }, {\n    key: \"receiveBuffer\",\n    value: function receiveBuffer(_ref) {\n      var _this4 = this;\n\n      var pairs = _ref.pairs,\n          stream = _ref.stream,\n          originID = _ref.originID;\n      debug('receiveBuffer', this.getType(), pairs.length, pairs); // remove the first element since it has passed by _receive\n\n      if (pairs.length >= 1) {\n        pairs.forEach(function (elem) {\n          if (stream) {\n            _this4.passMsgByBroadcast(elem, originID);\n          } else {\n            _this4.receive(elem);\n          }\n        });\n      } else {\n        console.warn('Receiving empty message');\n      }\n    }\n  }, {\n    key: \"passMsgByBroadcast\",\n    value: function passMsgByBroadcast(elem, originID) {\n      var causalId = elem.pair && elem.pair.causalId || elem.causalId;\n      debug('passMsgByBroadcast:', {\n        elem: elem,\n        originID: originID,\n        causalId: causalId\n      }); // stream false to avoid to have a loop in the case of a stream\n\n      var packet = this.getPacket({\n        pairs: [elem],\n        stream: false\n      });\n      var isReady = elem.isReady;\n      var broadcast = this._communicationChannel.broadcast;\n      var message = this.getBroadcastMessageFormat(broadcast._protocol, causalId, isReady, packet);\n\n      if (!(message.id && message.id.e)) {\n        debugger;\n      }\n\n      broadcast._receive(causalId + '-O', message);\n    }\n  }, {\n    key: \"sendBroadcast\",\n    value: function sendBroadcast(msg) {\n      var isReady = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      debug('Send Broadcast ', {\n        msg: msg,\n        isReady: isReady\n      });\n      this._document.lastSentMsgId = this._communicationChannel.broadcast.send(_objectSpread({}, msg, {\n        isReady: isReady\n      }), null, isReady, false);\n      return this._document.lastSentMsgId;\n    }\n  }, {\n    key: \"sendUnicast\",\n    value: function sendUnicast(id, msg) {\n      this._communicationChannel.sendUnicast(id, msg);\n    }\n  }, {\n    key: \"haveBeenReceived\",\n    value: function haveBeenReceived(element) {\n      return this._communicationChannel.broadcast._shouldStopPropagation(element);\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize(msg) {\n      var string = JSON.stringify(msg);\n      return string.length;\n    }\n  }, {\n    key: \"receive\",\n    value: function receive(msg) {\n      debug('default receive', msg);\n    }\n  }, {\n    key: \"action\",\n    value: function action(msg) {\n      console.error('action not defined', this._name);\n    }\n  }, {\n    key: \"sendAction\",\n    value: function sendAction(name, args) {\n      debug('sendAction', args);\n      this.Event(\"\".concat(name, \"_Action\"), args);\n    }\n  }, {\n    key: \"Event\",\n    value: function Event(name, args) {\n      debug('Event: ', \"\".concat(name, \"_Event\"), args);\n\n      this._document.emit(\"\".concat(name, \"_Event\"), args);\n    }\n  }, {\n    key: \"chunkSubstr\",\n    value: function chunkSubstr(str, size) {\n      var numChunks = Math.ceil(str.length / size);\n      var chunks = new Array(numChunks);\n\n      for (var i = 0, o = 0; i < numChunks; ++i, o += size) {\n        chunks[i] = str.substr(o, size);\n      }\n\n      return chunks;\n    }\n  }, {\n    key: \"getCausalID\",\n    value: function getCausalID(lseqNode) {\n      var causalId = {\n        e: lseqNode.t.s,\n        c: lseqNode.t.c\n      };\n      debug('getCausalID', {\n        lseqNode: lseqNode,\n        causalId: causalId\n      });\n      return causalId;\n    }\n  }, {\n    key: \"getBroadcastMessageFormat\",\n    value: function getBroadcastMessageFormat(protocol, id, isReady, payload) {\n      return {\n        protocol: protocol,\n        id: id,\n        isReady: isReady,\n        payload: payload\n      };\n    }\n  }, {\n    key: \"close\",\n    value: function close() {}\n  }]);\n\n  return Event;\n}(EventEmitter);","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { Event } from './../Event';\n\nvar debug = require('debug')('CRATE:Communication:MarkerManager:MarkerEvent');\n\nexport var MarkerEvent =\n/*#__PURE__*/\nfunction (_Event) {\n  _inherits(MarkerEvent, _Event);\n\n  function MarkerEvent(opts) {\n    var _this;\n\n    _classCallCheck(this, MarkerEvent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MarkerEvent).call(this, opts));\n    _this._communicationChannel = _this._document._communication._behaviors_comm;\n    _this._defaultOptions = {\n      lifeTime: 5 * 1000,\n      range: {\n        index: 0,\n        length: 0\n      },\n      cursor: false\n    };\n    return _this;\n  }\n\n  _createClass(MarkerEvent, [{\n    key: \"addMarker\",\n    value: function addMarker(id) {\n      var isItMe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.emit('addMarker', id, isItMe, opts);\n    }\n  }, {\n    key: \"removeMarker\",\n    value: function removeMarker() {}\n  }]);\n\n  return MarkerEvent;\n}(Event);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { MarkerEvent } from './MarkerEvent';\n\nvar debug = require('debug')('CRATE:Communication:MarkerManager:PingManger');\n\nexport var PingManager =\n/*#__PURE__*/\nfunction (_MarkerEvent) {\n  _inherits(PingManager, _MarkerEvent);\n\n  function PingManager(opts) {\n    var _this;\n\n    _classCallCheck(this, PingManager);\n\n    var EventName = opts.EventName || 'Ping';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PingManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    /**\r\n     * startimer A timer used for sending pings\r\n     * @type {Timer}\r\n     */\n\n    _this._startTimer = {};\n    _this._pingPeriod = opts.PingPeriod;\n    /**\r\n     * @todo: make ping interval as option\r\n     */\n\n    _this.startPing(_this._pingPeriod);\n\n    return _this;\n  }\n  /**\r\n   * startPing send periodically ping\r\n   * @param  {[type]} interval [description]\r\n   * @return {[type]}          [description]\r\n   * @todo TODO: Make interval as global parameter\r\n   */\n\n\n  _createClass(PingManager, [{\n    key: \"startPing\",\n    value: function startPing(interval) {\n      var _this2 = this;\n\n      this._startTimer = setInterval(function () {\n        _this2.broadcast(_this2._document.user);\n      }, interval);\n    }\n    /**\r\n     * stopPing stopPing\r\n     * @todo  implement this function\r\n     * @return {[type]} [description]\r\n     */\n\n  }, {\n    key: \"stopPing\",\n    value: function stopPing() {\n      clearInterval(this._startTimer);\n    }\n    /**\r\n     * receive at the reception of ping\r\n     * @param  {[type]} origin [description]\r\n     * @param  {[type]} pseudo [description]\r\n     * @return {[type]}        [description]\r\n     */\n\n  }, {\n    key: \"receive\",\n    value: function receive(_ref) {\n      var id = _ref.id,\n          pseudo = _ref.pseudo;\n      this.emit('Ping_received', {\n        id: id,\n        pseudo: pseudo\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.stopPing();\n    }\n  }]);\n\n  return PingManager;\n}(MarkerEvent);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { MarkerEvent } from './MarkerEvent';\n\nvar debug = require('debug')('CRATE:Communication:MarkerManager:CaretManger');\n\nexport var CaretManager =\n/*#__PURE__*/\nfunction (_MarkerEvent) {\n  _inherits(CaretManager, _MarkerEvent);\n\n  function CaretManager(opts) {\n    var _this;\n\n    _classCallCheck(this, CaretManager);\n\n    var EventName = opts.EventName || 'Caret';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CaretManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    _this._defaultOptions = {\n      lifeTime: 5 * 1000,\n      cursor: true\n    };\n    return _this;\n  }\n  /**\r\n   * [caretMoved description]\r\n   * @param  {[type]} range [description]\r\n   * @return {[type]}       [description]\r\n   */\n\n\n  _createClass(CaretManager, [{\n    key: \"caretMoved\",\n    value: function caretMoved(range) {\n      this.broadcast({\n        range: range,\n        id: this._document.uid\n      });\n      return range;\n    }\n  }, {\n    key: \"receive\",\n\n    /**\r\n     *  At the reception of CARET position\r\n     * @param  {[type]} range  [description]\r\n     * @param  {[type]} id [description]\r\n     * @return {[type]}        [description]\r\n     */\n    value: function receive(_ref) {\n      var range = _ref.range,\n          id = _ref.id;\n      this.emit('Caret_received', {\n        range: range,\n        id: id\n      });\n    }\n  }]);\n\n  return CaretManager;\n}(MarkerEvent);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { PingManager } from './PingManager';\nimport { CaretManager } from './CaretManager';\nimport { MarkerEvent } from './MarkerEvent';\n\nvar debug = require('debug')('CRATE:Communication:MarkerManager:MarkerManager');\n/**\r\n * This class manages markers,pings,cursors of the different users\r\n */\n\n\nexport var MarkerManager =\n/*#__PURE__*/\nfunction (_MarkerEvent) {\n  _inherits(MarkerManager, _MarkerEvent);\n\n  function MarkerManager(opts) {\n    var _this;\n\n    _classCallCheck(this, MarkerManager);\n\n    var EventName = opts.EventName || 'MarkerManager';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MarkerManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    _this._pingManager = new PingManager(_objectSpread({}, opts));\n    _this._caretManger = new CaretManager(_objectSpread({}, opts));\n\n    _this._pingManager.on(\"Ping_received\", function (msg) {\n      _this.emit(\"Ping_received\", msg);\n    });\n\n    _this._caretManger.on(\"Caret_received\", function (msg) {\n      _this.emit(\"Caret_received\", msg);\n\n      debug(\"Caret_received\", msg);\n    });\n\n    return _this;\n  }\n  /**\r\n   * Set the current caret position\r\n   * @param {*} range the current caret position \r\n   */\n\n\n  _createClass(MarkerManager, [{\n    key: \"caretMoved\",\n    value: function caretMoved(range) {\n      this._caretManger.caretMoved(range);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this._pingManager.close();\n\n      this._caretManger.close();\n    }\n  }]);\n\n  return MarkerManager;\n}(MarkerEvent);","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { Event } from './../Event';\n\nvar debug = require('debug')('CRATE:Communication:TextManager:TextEvent');\n\nexport var TextEvent =\n/*#__PURE__*/\nfunction (_Event) {\n  _inherits(TextEvent, _Event);\n\n  function TextEvent(opts) {\n    var _this;\n\n    _classCallCheck(this, TextEvent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextEvent).call(this, opts));\n    _this._communicationChannel = _this._document._communication._data_comm;\n    _this._sequence = _this._document.sequence;\n    return _this;\n  }\n\n  _createClass(TextEvent, [{\n    key: \"getLSEQID\",\n    value: function getLSEQID(_ref) {\n      var pair = _ref.pair,\n          id = _ref.id;\n      var LSEQID = id;\n      if (pair) LSEQID = pair.id;\n      var idForCausal = {\n        e: LSEQID._s[LSEQID._s.length - 1],\n        c: LSEQID._c[LSEQID._c.length - 1]\n      };\n      return idForCausal;\n    }\n  }]);\n\n  return TextEvent;\n}(Event);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport VVwE from \"version-vector-with-exceptions\";\nimport { TextEvent } from './TextEvent';\n\nvar debug = require('debug')('CRATE:Communication:TextManager:AntiEntropyManager');\n\nexport var AntiEntropyManager =\n/*#__PURE__*/\nfunction (_TextEvent) {\n  _inherits(AntiEntropyManager, _TextEvent);\n\n  function AntiEntropyManager(opts) {\n    var _this;\n\n    _classCallCheck(this, AntiEntropyManager);\n\n    var EventName = opts.EventName || 'Anti-Entropy';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AntiEntropyManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    _this._antiEntropyPeriod = opts.AntiEntropyPeriod;\n    _this._textManager = opts.TextManager;\n    _this._communicationChannel = _this._document._communication._behaviors_comm;\n\n    _this.on('Request', function (msg) {\n      _this.receiveRequest(msg);\n    });\n\n    _this.on('Response', function (msg) {\n      _this.receiveResponse(msg);\n    });\n\n    setTimeout(function () {\n      _this.sendAntiEntropyRequest();\n    }, 1000);\n    return _this;\n  }\n\n  _createClass(AntiEntropyManager, [{\n    key: \"start\",\n    value: function start() {\n      debug('AntiEntropyManager', 'start', 'Period', this._antiEntropyPeriod, this); //  this._communicationChannel.broadcast.startAntiEntropy(this._antiEntropyPeriod);\n\n      this.startAntiEntropy(2000);\n    }\n  }, {\n    key: \"receive\",\n    value: function receive(msg) {\n      this.emit(msg.type, _objectSpread({}, msg));\n    }\n  }, {\n    key: \"receiveRequest\",\n    value: function receiveRequest(_ref) {\n      var _this2 = this;\n\n      var id = _ref.id,\n          causality = _ref.causality;\n\n      var localVVwE = this._document._communication.causality.clone();\n\n      var remoteVVwE = new VVwE(null).constructor.fromJSON(causality); // cast\n\n      debug('receiveRequest', {\n        antiEntropyPeriod: this._antiEntropyPeriod,\n        id: id,\n        remoteVVwE: remoteVVwE,\n        localVVwE: localVVwE\n      });\n      var missingLSEQIDs = []; // #1 for each entry of our VVwE, look if the remote VVwE knows less\n\n      var localEntries = localVVwE.vector.arr;\n      localEntries.forEach(function (localEntry) {\n        var remoteEntryIndex = remoteVVwE.vector.indexOf(localEntry);\n        var remoteEntry = null;\n\n        if (remoteEntryIndex > 0) {\n          remoteEntry = remoteVVwE.vector.arr[remoteEntryIndex];\n        }\n\n        var missingLSEQIDsEntry = _this2.getMissingLSEQIDs(localEntry, remoteEntry);\n\n        Array.prototype.push.apply(missingLSEQIDs, missingLSEQIDsEntry);\n      });\n\n      if (missingLSEQIDs.length > 0) {\n        var elements = this.getElements(missingLSEQIDs); // #2 send back the found elements\n\n        if (elements.length != 0) {\n          debug('Receive AntiEntropy And there are differences', id, remoteVVwE, localVVwE, elements);\n          this.sendAntiEntropyResponse(id, localVVwE, elements);\n          console.log(\"sendAction\", 'Title', this._document.name);\n          this.sendAction('Title', this._document.name, id);\n        }\n      }\n    }\n  }, {\n    key: \"getMissingLSEQIDs\",\n    value: function getMissingLSEQIDs(localEntry, remoteEntry) {\n      var start = 1;\n\n      if (remoteEntry) {\n        start = remoteEntry.v + 1;\n      }\n\n      var missingLSEQIDs = [];\n\n      for (var j = start; j <= localEntry.v; ++j) {\n        // #B check if not one of the local exceptions\n        if (localEntry.x.indexOf(j) < 0) {\n          missingLSEQIDs.push({\n            _e: localEntry.e,\n            _c: j\n          });\n        }\n      } // #C handle the exceptions of the remote vector\n\n\n      if (remoteEntry) {\n        for (var _j = 0; _j < remoteEntry.x.length; ++_j) {\n          var except = remoteEntry.x[_j];\n\n          if (localEntry.x.indexOf(except) < 0 && except <= localEntry.v) {\n            missingLSEQIDs.push({\n              _e: localEntry.e,\n              _c: except\n            });\n          }\n        }\n      }\n\n      return missingLSEQIDs;\n    }\n    /*!\r\n       * \\brief search a set of elements in our sequence and return them\r\n       * \\param toSearch the array of elements {_e, _c} to search\r\n       * \\returns an array of nodes\r\n       */\n\n  }, {\n    key: \"getElements\",\n    value: function getElements(toSearch) {\n      var _this3 = this;\n\n      var lseqNodes = this.getLSEQNodes();\n      debug('getElements', {\n        toSearch: toSearch,\n        lseqNodes: lseqNodes\n      });\n      var elements = [];\n      lseqNodes.forEach(function (lseqNode) {\n        if (_this3.isIdInSet({\n          id: lseqNode.t.s,\n          clock: lseqNode.t.c,\n          toSearch: toSearch\n        })) {\n          elements.push(lseqNode);\n        }\n      });\n      return elements;\n    }\n  }, {\n    key: \"getLSEQNodes\",\n    value: function getLSEQNodes() {\n      var LSEQNodeArray = [];\n      var root = this._sequence.root;\n\n      var preorder = function preorder(node) {\n        if (node.e && node.e != \"\") {\n          LSEQNodeArray.push(node);\n        }\n\n        var children = node.children;\n        children.forEach(function (child) {\n          preorder(child);\n        });\n      };\n\n      preorder(root);\n      return LSEQNodeArray;\n    }\n  }, {\n    key: \"getLSEQNodes\",\n    value: function getLSEQNodes() {\n      var LSEQNodeArray = [];\n      var root = this._sequence.root;\n\n      var preorder = function preorder(node) {\n        if (node.e && node.e != \"\") {\n          LSEQNodeArray.push(node);\n        }\n\n        var children = node.children;\n        children.forEach(function (child) {\n          preorder(child);\n        });\n      };\n\n      preorder(root);\n      return LSEQNodeArray;\n    }\n  }, {\n    key: \"isIdInSet\",\n    value: function isIdInSet(_ref2) {\n      var id = _ref2.id,\n          clock = _ref2.clock,\n          toSearch = _ref2.toSearch;\n\n      for (var j = 0; j < toSearch.length; j++) {\n        var _toSearch$j = toSearch[j],\n            _e = _toSearch$j._e,\n            _c = _toSearch$j._c;\n\n        if (_e === id && _c === clock) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"receiveResponse\",\n    value: function receiveResponse(_ref3) {\n      var _this4 = this;\n\n      var elements = _ref3.elements,\n          causalityAtReceipt = _ref3.causalityAtReceipt;\n      debug('receiveResponse', {\n        elements: elements,\n        causalityAtReceipt: causalityAtReceipt\n      }); // #1 considere each message in the response independantly     \n\n      var elems = [];\n      elements.forEach(function (lseqNode) {\n        var causalId = _this4.getCausalID(lseqNode);\n\n        var msg = {\n          id: causalId\n        };\n        var authorID = lseqNode.t.s.split(\"-\")[0];\n        var pair = {\n          elem: lseqNode.e,\n          id: lseqNode.e.id // #2 only check if the message has not been received yet\n\n        };\n\n        if (!_this4.haveBeenReceived(msg)) {\n          // this._document.causality.incrementFrom(causalID)\n          // this to prevent the caret movement in the case of anti-entropy\n          elems.push({\n            pair: pair,\n            id: authorID,\n            causalId: causalId,\n            antientropy: true\n          });\n        }\n      });\n      this.Event('Insert', {\n        pairs: elems,\n        stream: true\n      }); // #3 merge causality structures\n\n      this._document.causality.merge(causalityAtReceipt);\n    }\n    /**\r\n    * We started Antientropy mechanism in order to retreive old missed files\r\n    */\n\n  }, {\n    key: \"startAntiEntropy\",\n    value: function startAntiEntropy() {\n      var _this5 = this;\n\n      var delta = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2000;\n      this._intervalAntiEntropy = setInterval(function () {\n        _this5.sendAntiEntropyRequest();\n      }, delta);\n    }\n  }, {\n    key: \"sendAntiEntropyRequest\",\n    value: function sendAntiEntropyRequest() {\n      var id = this._document._options.editingSessionID;\n      this.sendLocalBroadcast({\n        type: 'Request',\n        id: id,\n        causality: this._document._communication.causality\n      });\n      debug('sendAntiEntropyRequest', {\n        type: 'Request',\n        id: id,\n        causality: this._document._communication.causality\n      });\n    }\n    /**\r\n    * Send entropy response\r\n    * @deprecated\r\n    * @param  {[type]} origin             [description]\r\n    * @param  {[type]} causalityAtReceipt [description]\r\n    * @param  {[type]} elements           [description]\r\n    * @return {[type]}                    [description]\r\n    */\n\n  }, {\n    key: \"sendAntiEntropyResponse\",\n    value: function sendAntiEntropyResponse(origin, causalityAtReceipt, elements) {\n      var id = this._document._options.editingSessionID; // #1 metadata of the antientropy response\n\n      this.unicast(origin, {\n        type: 'Response',\n        id: id,\n        causalityAtReceipt: causalityAtReceipt,\n        elements: elements\n      });\n      debug('sendAntiEntropyResponse', {\n        type: 'Response',\n        id: id,\n        causalityAtReceipt: causalityAtReceipt,\n        elements: elements\n      });\n    }\n  }, {\n    key: \"stopAntiEnropy\",\n    value: function stopAntiEnropy() {\n      if (this._intervalAntiEntropy) {\n        clearInterval(this._intervalAntiEntropy);\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.stopAntiEnropy();\n    }\n  }]);\n\n  return AntiEntropyManager;\n}(TextEvent);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { TextEvent } from './TextEvent';\n\nvar debug = require('debug')('CRATE:Communication:TextManager:InsertManager');\n\nexport var InsertManager =\n/*#__PURE__*/\nfunction (_TextEvent) {\n  _inherits(InsertManager, _TextEvent);\n\n  function InsertManager(opts) {\n    var _this;\n\n    _classCallCheck(this, InsertManager);\n\n    var EventName = opts.EventName || 'Insert';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InsertManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    _this._textManager = opts.TextManager;\n    _this.action = _this.insert;\n    _this._lastSentId = null;\n    return _this;\n  }\n  /*!\r\n   * \\brief local insertion of a character inside the sequence structure. It\r\n   * broadcasts the operation to the rest of the network.\r\n   * \\param character the character to insert in the sequence\r\n   * \\param index the index in the sequence to insert\r\n   * \\return the identifier freshly allocated\r\n   */\n\n\n  _createClass(InsertManager, [{\n    key: \"insert\",\n    value: function insert(_ref) {\n      var packet = _ref.packet,\n          position = _ref.position,\n          _ref$source = _ref.source,\n          source = _ref$source === void 0 ? 'user' : _ref$source;\n\n      if (this.isItConvertibleToJSON(packet)) {\n        var pair = this.insertLSEQ(packet, position);\n\n        this._document.delta.ops.splice(position, 0, {\n          insert: packet.content,\n          attributes: packet.attributes\n        });\n\n        debug('local Insert', {\n          packet: packet,\n          position: position,\n          source: source\n        });\n\n        if (source === 'user') {\n          {\n            this.broadcast({\n              id: this._document.uid,\n              pair: pair\n            });\n            this.setLastChangesTime();\n          }\n        }\n\n        ;\n      }\n    }\n    /**\r\n     * Insert a value at the targeted index.\r\n     * @param {Object} element The element to insert, e.g. a character if the\r\n     * sequence is a string.\r\n     * @param {Number} index The position in the array.\r\n     * @return {Object} {_e: element of Object type, _i: Identifier}\r\n     */\n\n  }, {\n    key: \"insertLSEQ\",\n    value: function insertLSEQ(element, index) {\n      var pei = this._sequence._get(index),\n          // #1a previous bound\n      qei = this._sequence._get(index + 1); // #1b next bound\n      // #2a incrementing the local counter\n\n\n      this._sequence._c += 1; // #2b generating the id inbetween the bounds\n\n      var id = this._sequence.alloc(pei, qei); // #3 add it to the structure and return value\n\n\n      var pair = {\n        elem: _objectSpread({\n          id: id\n        }, element),\n        id: id\n      };\n\n      this._sequence.applyInsert(pair);\n\n      return pair;\n    }\n  }, {\n    key: \"getIDBeforeInsert\",\n    value: function getIDBeforeInsert(sequence) {\n      var pei = sequence._get(index),\n          // #1a previous bound\n      qei = sequence._get(index + 1); // #1b next bound\n      // #2a incrementing the local counter\n\n\n      this._c += 1; // #2b generating the id inbetween the bounds\n\n      var id = sequence.alloc(pei, qei);\n      return id;\n    }\n    /*!\r\n     * \\brief insertion of an element from a remote site. It emits 'remoteInsert' \r\n     * with the index of the element to insert, -1 if already existing.\r\n     * \\param ei the result of the remote insert operation\r\n     * \\param origin the origin id of the insert operation\r\n     */\n\n  }, {\n    key: \"receive\",\n    value: function receive(_ref2) {\n      var id = _ref2.id,\n          pair = _ref2.pair,\n          _ref2$antientropy = _ref2.antientropy,\n          antientropy = _ref2$antientropy === void 0 ? false : _ref2$antientropy;\n\n      var index = this._sequence.applyInsert(pair, false);\n\n      debug('remoteInsert', 'pair', pair, ' sequence Index ', index);\n\n      this._document.delta.ops.splice(index - 1, 0, {\n        insert: pair.elem.content,\n        attributes: pair.elem.attributes\n      });\n\n      if (index >= 0) {\n        //  this.emit('remoteInsert', pair.elem, index);\n        this.setLastChangesTime();\n\n        if (!antientropy) {\n          var range = {\n            index: index,\n            length: 0\n          };\n          var msg = {\n            range: range,\n            id: id,\n            stream: false\n          };\n          this.Event('Caret', msg);\n        }\n      }\n    }\n    /**\r\n     * Validate that the message is convertable to JSON\r\n     * @param {*} msg \r\n     */\n\n  }, {\n    key: \"isItConvertibleToJSON\",\n    value: function isItConvertibleToJSON(msg) {\n      try {\n        var test = JSON.parse(JSON.stringify(msg));\n        return true;\n      } catch (e) {\n        console.error('The object cannot be convert to json ', e, insertMsg);\n        return false;\n      }\n    }\n  }]);\n\n  return InsertManager;\n}(TextEvent);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { TextEvent } from './TextEvent';\n\nvar debug = require('debug')('CRATE:Communication:TextManager:RemoveManager');\n\nexport var RemoveManager =\n/*#__PURE__*/\nfunction (_TextEvent) {\n  _inherits(RemoveManager, _TextEvent);\n\n  function RemoveManager(opts) {\n    var _this;\n\n    _classCallCheck(this, RemoveManager);\n\n    var EventName = opts.EventName || 'Remove';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RemoveManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    _this._lastSentId = null;\n    _this._textManager = opts.TextManager;\n    _this.action = _this.remove;\n    _this._pairs = [];\n    return _this;\n  }\n  /*!\r\n   * \\brief local deletion of a character from the sequence structure. It \r\n   * broadcasts the operation to the rest of the network.\r\n   * \\param index the index of the element to remove\r\n   * \\return the identifier freshly removed\r\n   */\n\n\n  _createClass(RemoveManager, [{\n    key: \"remove\",\n    value: function remove(index) {\n      var lseqNode = this._sequence._get(index + 1);\n\n      var isReady = this.getCausalID(lseqNode);\n      var reference = this.removeFromSequence(index);\n\n      this._document.delta.ops.splice(index, 1);\n\n      debug(\"Remove\", {\n        index: index,\n        reference: reference\n      });\n\n      if (reference) {\n        this._sequence._c += 1;\n        this.broadcast({\n          id: this._document.uid,\n          isReady: isReady,\n          reference: reference\n        });\n      }\n\n      this.setLastChangesTime();\n    }\n  }, {\n    key: \"removeFromSequence\",\n    value: function removeFromSequence(index) {\n      if (this._sequence.root.subCounter === 2) {\n        console.warn('remove from sequence is empty');\n      } else if (index >= this._sequence.root.subCounter - 2) {\n        console.warn('Lseq, index is out Of Bounds');\n      } else {\n        var reference = this._sequence.remove(index);\n\n        return reference;\n      }\n\n      return null;\n    }\n    /*!\r\n     * \\brief removal of an element from a remote site.  It emits 'remoteRemove'\r\n     * with the index of the element to remove, -1 if does not exist\r\n     * \\param id the result of the remote insert operation\r\n     * \\param origin the origin id of the removal\r\n     */\n\n  }, {\n    key: \"receive\",\n    value: function receive(_ref) {\n      var id = _ref.id,\n          reference = _ref.reference,\n          isReady = _ref.isReady;\n      debug(\"receive remove\", {\n        id: id,\n        reference: reference\n      });\n\n      var index = this._sequence.applyRemove(reference); // this.emit('remoteRemove', index);\n\n\n      this._document.delta.ops.splice(index - 1, 1);\n\n      if (index >= 0) {\n        var range = {\n          index: index - 1,\n          length: 0\n        };\n        var msg = {\n          range: range,\n          id: id\n        };\n        this.Event('Caret', msg);\n      }\n\n      this.setLastChangesTime();\n    }\n  }]);\n\n  return RemoveManager;\n}(TextEvent);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { TextEvent } from './TextEvent';\n\nvar debug = require('debug')('CRATE:Communication:TextManager:TitleManager');\n\nexport var TitleManager =\n/*#__PURE__*/\nfunction (_TextEvent) {\n  _inherits(TitleManager, _TextEvent);\n\n  function TitleManager(opts) {\n    var _this;\n\n    _classCallCheck(this, TitleManager);\n\n    var EventName = opts.EventName || 'Title';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TitleManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    _this._textManager = opts.TextManager;\n    _this._communicationChannel = _this._document._communication._behaviors_comm;\n    _this.action = _this.sendChangeTitle;\n    return _this;\n  }\n  /**\r\n   * [sendChangeTitle Broadcast the new title]\r\n   * @param  {[type]} title [description]\r\n   * @return {[type]}       [description]\r\n   */\n\n\n  _createClass(TitleManager, [{\n    key: \"sendChangeTitle\",\n    value: function sendChangeTitle(title) {\n      var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      debug('Title sent ', title);\n      this._document.name = title;\n      var msg = {\n        id: this._document.uid,\n        title: title\n      };\n\n      if (!id) {\n        this.broadcast(msg);\n      } else {\n        debug('send title in unicast');\n        this.unicast(id, msg);\n      }\n    }\n  }, {\n    key: \"receive\",\n\n    /**\r\n     * [changeTitle At the reception of MTitleChanged ]\r\n     * @param  {[type]} title [description]\r\n     * @return {[type]}       [description]\r\n     */\n    value: function receive(msg) {\n      this.emit('changeTitle', msg.title);\n      this._document.name = msg.title;\n    }\n  }]);\n\n  return TitleManager;\n}(TextEvent);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport { TextEvent } from './TextEvent';\nimport { AntiEntropyManager } from './AntiEntropyManager';\nimport { InsertManager } from './InsertManager';\nimport { RemoveManager } from './RemoveManager';\nimport { TitleManager } from './TitleManager';\n\nvar debug = require('debug')('CRATE:Communication:TextManager:TextManager');\n\nexport var TextManager =\n/*#__PURE__*/\nfunction (_TextEvent) {\n  _inherits(TextManager, _TextEvent);\n\n  function TextManager(opts) {\n    var _this;\n\n    _classCallCheck(this, TextManager);\n\n    var EventName = opts.EventName || 'TextManager';\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextManager).call(this, _objectSpread({\n      EventName: EventName\n    }, opts)));\n    _this._insertManager = new InsertManager(_objectSpread({\n      TextManager: _assertThisInitialized(_assertThisInitialized(_this))\n    }, opts));\n    _this._removeManager = new RemoveManager(_objectSpread({\n      TextManager: _assertThisInitialized(_assertThisInitialized(_this))\n    }, opts));\n    _this._titleManager = new TitleManager(_objectSpread({\n      TextManager: _assertThisInitialized(_assertThisInitialized(_this))\n    }, opts));\n    _this._antiEntropyManager = new AntiEntropyManager(_objectSpread({\n      TextManager: _assertThisInitialized(_assertThisInitialized(_this))\n    }, opts)); //this._antiEntropyManager.sendAntiEntropyRequest()\n\n    _this._removeBuffer = new Map(); //this._antiEntropyManager.start()\n\n    _this.on('sendChangeTitle', function () {\n      _this._titleManager.sendChangeTitle();\n    });\n\n    _this.on('setLastChangesTime', function () {\n      _this._titleManager.sendChangeTitle();\n    });\n\n    return _this;\n  }\n\n  _createClass(TextManager, [{\n    key: \"addIdToRemoveBuffer\",\n    value: function addIdToRemoveBuffer(id) {\n      this._removeBuffer.set(this.hashCode(JSON.stringify(id)), id);\n    }\n  }, {\n    key: \"IsItInRemoveBuffer\",\n    value: function IsItInRemoveBuffer(id) {\n      return this._removeBuffer.has(JSON.stringify(id));\n    }\n  }, {\n    key: \"removeFromRemoveBuffer\",\n    value: function removeFromRemoveBuffer(id) {\n      this._removeBuffer.delete(JSON.stringify(id));\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this._insertManager.close();\n\n      this._removeManager.close();\n\n      this._titleManager.close();\n\n      this._antiEntropyManager.close();\n    }\n  }]);\n\n  return TextManager;\n}(TextEvent);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { MarkerManager } from './MarkerManager/MarkerManager';\nimport { TextManager } from './TextManager/TextManager';\nimport { Foglet, communication } from 'foglet-core';\n\nvar debug = require('debug')('CRATE:Communication');\n\nexport var Communication =\n/*#__PURE__*/\nfunction () {\n  function Communication(opts) {\n    _classCallCheck(this, Communication);\n\n    this._options = opts;\n    this._document = this._options.document;\n    this._foglet = this._options._foglet;\n  }\n\n  _createClass(Communication, [{\n    key: \"initModules\",\n    value: function initModules() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.causality = this._data_comm.broadcast._causality;\n      this.markerManager = new MarkerManager(this._options);\n      this.textManager = new TextManager(this._options);\n    }\n  }, {\n    key: \"initConnection\",\n    value: function () {\n      var _initConnection = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this._options.foglet) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return this._foglet.connection(this._options.foglet);\n\n              case 3:\n                _context.next = 8;\n                break;\n\n              case 5:\n                this._foglet.share();\n\n                _context.next = 8;\n                return this._foglet.connection();\n\n              case 8:\n                this.setCommunicationChannels();\n\n                this._foglet.emit('connected');\n\n                debug('application connected!');\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function initConnection() {\n        return _initConnection.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"setCommunicationChannels\",\n    value: function setCommunicationChannels() {\n      this._data_comm = new communication(this._foglet.overlay().network, '_data_comm');\n      this.routeMsgToEvents(this._data_comm);\n      this._behaviors_comm = new communication(this._foglet.overlay().network, '_behaviors_comm');\n      this.routeMsgToEvents(this._behaviors_comm);\n    }\n  }, {\n    key: \"routeMsgToEvents\",\n    value: function routeMsgToEvents(communicatioChannel) {\n      var _this = this;\n\n      communicatioChannel.onBroadcast(function (id, message) {\n        _this._document.emit(message.event, message);\n      });\n      communicatioChannel.onUnicast(function (id, message) {\n        _this._document.emit(message.event, message);\n      });\n      communicatioChannel.onStreamBroadcast(function (id, message) {\n        _this.receiveStream(id, message);\n      });\n      communicatioChannel.onStreamUnicast(function (id, message) {\n        _this.receiveStream(id, message);\n      });\n    }\n  }, {\n    key: \"receiveStream\",\n    value: function receiveStream(id, stream) {\n      var _this2 = this;\n\n      debug('document', 'receiving a stream from ', id);\n      var content = '';\n      stream.on('data', function (data) {\n        content += data;\n      });\n      stream.on('end', function () {\n        var packet = JSON.parse(content);\n        content = '';\n        debug('document', 'Message received', packet.pairs, 'from', id);\n\n        _this2.receive(packet.event, packet, id);\n      });\n    }\n  }, {\n    key: \"receive\",\n    value: function receive(event, packet, originID) {\n      debug('communication receive ', event, packet);\n\n      this._document.emit(event, _objectSpread({}, packet, {\n        originID: originID\n      }));\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this3 = this;\n\n      this.markerManager.close();\n      this.textManager.close();\n\n      this._foglet.unshare();\n\n      this._foglet._networkManager._rps.network._rps.disconnect();\n\n      setTimeout(function () {\n        _this3._foglet = null;\n      }, 2000);\n    }\n  }]);\n\n  return Communication;\n}();","import _regeneratorRuntime from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { EventEmitter } from 'events';\nimport LSEQTree from 'lseqtree';\nimport { Communication } from './communication/Communication';\nimport Marker from './view/marker';\n\nvar debug = require('debug')('CRATE:Document');\n\nvar Document =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(Document, _EventEmitter);\n\n  function Document(options, documentIndex, crate) {\n    var _this;\n\n    _classCallCheck(this, Document);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Document).call(this));\n    _this._options = options;\n    _this.documentIndex = documentIndex;\n    _this.crate = crate;\n    _this.documentId = _this._options.signalingOptions.session;\n    _this._lastChanges = new Date().getTime();\n    _this.documentActiveWatcher;\n    _this.state = 'active';\n    _this.name = options.name; //User ID\n\n    _this.user = options.user;\n    _this.uid = _this.user.id;\n    _this.lastSentMsgId = null;\n    return _this;\n  }\n  /**\r\n   * connect to the session of the document\r\n   */\n\n\n  _createClass(Document, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var options, _ref, View;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = this._options;\n                this._communication = new Communication(_objectSpread({\n                  document: this\n                }, this._options));\n                _context.next = 4;\n                return this._communication.initConnection();\n\n              case 4:\n                if (!options.display) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 7;\n                return import(\n                /* webpackMode: \"eager\", webpackChunkName: \"Crate-View\" */\n                './View.js');\n\n              case 7:\n                _ref = _context.sent;\n                View = _ref.View;\n                this._view = new View(options, this, options.containerID);\n\n              case 10:\n                this.sequence = new LSEQTree(this._communication._data_comm.broadcast._causality.local.e);\n                this.delta = {\n                  ops: []\n                  /* TODO:Think about the creation of modules without view */\n\n                };\n\n                this._communication.initModules(); // #1B if it is imported from an existing object, initialize it with these\n                // #2 grant fast access\n\n\n                this._foglet = this._communication._foglet;\n                this.broadcast = this._communication._data_comm.broadcast;\n                this.broadcastCaret = this._communication._behaviors_comm.broadcast;\n                this.rps = this._communication._data_comm.network.rps;\n                this.causality = this._communication.causality;\n                this.signalingOptions = options.signalingOptions;\n\n                if (options.importFromJSON) {\n                  this.loadFromJSON(options.importFromJSON);\n                }\n\n                if (options.display) {\n                  this._view.init();\n                }\n\n                this.emit('connected');\n\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function init() {\n        return _init.apply(this, arguments);\n      };\n    }()\n    /**\r\n     * setLastChangesTime set the last time of changes\r\n     */\n\n  }, {\n    key: \"setLastChangesTime\",\n    value: function setLastChangesTime() {\n      var _this2 = this;\n\n      this._lastChanges = new Date().getTime();\n      this.refreshDocument(this.sequence);\n      this.emit('changed');\n\n      if (this.state === 'sleep') {//TODO:wake up the server if it existes\n      }\n\n      this.state = 'active';\n      clearTimeout(this.documentActivityWatcher);\n      this.documentActivityWatcher = setTimeout(function () {\n        _this2.state = 'sleep';\n\n        _this2.emit('sleep');\n      }, this._options.documentActivityTimeout);\n    }\n    /*!\r\n     * \\brief create the core from an existing object\r\n     * \\param object the object to initialize the core model of crate containing a \r\n     * sequence and causality tracking metadata\r\n     */\n\n  }, {\n    key: \"loadFromJSON\",\n    value: function loadFromJSON(object) {\n      this.broadcast._causality = this.broadcast._causality.constructor.fromJSON(object.causality);\n      var local = this.broadcast._causality.local;\n      this._communication._behaviors_comm.broadcast._causality.local.e = local.e;\n      this.sequence.fromJSON(object.sequence);\n      this.sequence._s = local.e;\n      this.sequence._c = local.v;\n      this.delta = this.getDeltaFromSequence();\n    }\n    /**\r\n     * saveDocument save the document in local storage\r\n     * @return {[type]} [description]\r\n     */\n\n  }, {\n    key: \"saveDocument\",\n    value: function saveDocument() {\n      try {\n        var timeNow = new Date().getTime();\n        var document = {\n          date: timeNow,\n          title: this.name,\n          delta: this._view._editor.viewEditor.editor.delta,\n          sequence: this.sequence,\n          causality: this.causality,\n          name: this.name,\n          webRTCOptions: this.webRTCOptions,\n          markers: {},\n          signalingOptions: this.signalingOptions\n        };\n        store.set('CRATE2-' + this.signalingOptions.session, document);\n        debug('Document saved => ', document);\n        return true;\n      } catch (error) {\n        console.error(error);\n        return false;\n      }\n    }\n  }, {\n    key: \"refreshDocument\",\n    value: function refreshDocument(sequence) {\n      var _this3 = this;\n\n      var WhoWriteIt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (this._options.display) {\n        clearTimeout(this.refreshDocumentTimeout);\n        this.refreshDocumentTimeout = setTimeout(function () {\n          var range = _this3._view._editor.viewEditor.getSelection();\n\n          _this3._view._editor.viewEditor.setContents(_this3.delta, 'silent');\n\n          _this3._view._editor.viewEditor.setSelection(range, 'silent');\n\n          _this3._view._editor.updateCommentsLinks();\n        }, 10);\n      }\n    }\n  }, {\n    key: \"getDeltaFromSequence\",\n    value: function getDeltaFromSequence() {\n      var WhoWriteIt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var LSEQNodes = this.getLSEQNodes();\n      var ops = [];\n      LSEQNodes.forEach(function (node) {\n        var op = {\n          insert: node.e.content,\n          attributes: node.e.attributes\n        };\n\n        if (WhoWriteIt) {\n          var id = node.t.s;\n          op.attributes.color = Marker.getColor(id);\n        }\n\n        ops.push(op);\n      });\n      var length = ops.length;\n\n      if (length >= 2 && ops[length - 1].insert === '\\n' && ops[length - 2].insert != '\\n') {\n        ops.push({\n          insert: '\\n'\n        });\n      }\n\n      this.delta = {\n        ops: ops\n      };\n      return {\n        ops: ops\n      };\n    }\n  }, {\n    key: \"getLSEQNodes\",\n    value: function getLSEQNodes() {\n      var LSEQNodeArray = [];\n      var root = this.sequence.root;\n\n      var preorder = function preorder(node) {\n        if (node.e && node.e != '') {\n          LSEQNodeArray.push(node);\n        }\n\n        var children = node.children;\n        children.forEach(function (child) {\n          preorder(child);\n        });\n      };\n\n      preorder(root);\n      return LSEQNodeArray;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this._communication.close();\n\n      if (this._view) {\n        this._view.close();\n      }\n\n      this.crate.removeDocument(this.documentIndex);\n    }\n    /**\r\n     *  get the id of the session\r\n     */\n\n  }, {\n    key: \"getId\",\n    value: function getId(options) {\n      return options.signalingOptions.session;\n    }\n    /**\r\n     * focus on the next session\r\n     */\n\n  }, {\n    key: \"moveToNext\",\n    value: function moveToNext() {\n      this.crate.moveToNext(this.documentId);\n    }\n    /**\r\n     * focus on the previous session\r\n     */\n\n  }, {\n    key: \"moveToPrevious\",\n    value: function moveToPrevious() {\n      this.crate.moveToPrevious(this.documentId);\n    }\n  }, {\n    key: \"createNewDocument\",\n    value: function createNewDocument(documentId) {\n      this.crate.createNewDocument(documentId);\n    }\n  }]);\n\n  return Document;\n}(EventEmitter);\n\nexport { Document as default };","import _regeneratorRuntime from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport Document from './Document.js';\nimport { Foglet } from 'foglet-core';\nimport { GUID as _GUID } from './helpers/randomID';\nimport store from 'store';\nimport { EventEmitter } from 'events';\nimport fetch from 'node-fetch';\n\nvar DocumentBuilder =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(DocumentBuilder, _EventEmitter);\n\n  /**\r\n   * @param {*} options the different options of the document.\r\n   * @example\r\n   */\n  function DocumentBuilder(defaultOptions, crate) {\n    var _this;\n\n    _classCallCheck(this, DocumentBuilder);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DocumentBuilder).call(this));\n    _this._defaultOptions = defaultOptions;\n    _this._crate = crate;\n    return _this;\n  }\n  /**\r\n  * build the document and add it to the list of the documents\r\n  @description here we considered that one session contains one document.  when we created another document in the same page is in another session, if it is not action's opened it will received the changes. \r\n  @todo add the possibility of adding other document in the same session, so all the changes will taken into consideration even if the open document is different. \r\n   this is will be an optional choice for the users because it could create a high overhead in the network, \r\n   for example in the case of a large number of linked document any change in any document will be broadcasted to all the users. \r\n  */\n\n\n  _createClass(DocumentBuilder, [{\n    key: \"buildDocument\",\n    value: function () {\n      var _buildDocument = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(sessionId, sessionIndex) {\n        var foglet,\n            specialOpts,\n            defaultOptions,\n            options,\n            doc,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                foglet = _args.length > 2 && _args[2] !== undefined ? _args[2] : null;\n                specialOpts = _args.length > 3 && _args[3] !== undefined ? _args[3] : {};\n                defaultOptions = _objectSpread({}, this._defaultOptions, specialOpts);\n                _context.next = 5;\n                return this.prepareOptions(sessionId, defaultOptions);\n\n              case 5:\n                options = _context.sent;\n\n                if (!foglet) {\n                  foglet = this.getNewFoglet(options);\n                }\n\n                options._foglet = foglet;\n                doc = new Document(options, sessionIndex, this._crate);\n                return _context.abrupt(\"return\", doc);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function buildDocument(_x, _x2) {\n        return _buildDocument.apply(this, arguments);\n      };\n    }()\n    /**\r\n     * set the different options for the created document\r\n     */\n\n  }, {\n    key: \"prepareOptions\",\n    value: function () {\n      var _prepareOptions = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(sessionId, options) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.setSignalingOptions(options, sessionId);\n                this.getLocalStorageData(options);\n                _context2.next = 4;\n                return this.setWebRTCOptions(options);\n\n              case 4:\n                this.setUser(options);\n                this.setDocumentTitle(options);\n                this.setTemporarySessionID(options);\n                this.setFogletOptions(options);\n                this.setDocumentActivityTimeout(options);\n                return _context2.abrupt(\"return\", options);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function prepareOptions(_x3, _x4) {\n        return _prepareOptions.apply(this, arguments);\n      };\n    }()\n    /**\r\n     * set Temporary Session ID to be able to open the document in different tabs for the same user.\r\n     * @description foglet is based on the id of the user, it will not work in the case of having two users with same id, this why we have add to the user id\r\n     * a random part to consider each tab as separate user in foglet but it will be considered the same user in CRATE.\r\n     */\n\n  }, {\n    key: \"setTemporarySessionID\",\n    value: function setTemporarySessionID(options) {\n      this._editingSessionID = options.user.id + '-' + _GUID();\n      options.editingSessionID = this._editingSessionID;\n    }\n    /**\r\n     * set Document Title\r\n     */\n\n  }, {\n    key: \"setDocumentTitle\",\n    value: function setDocumentTitle(options) {\n      var name = 'Untitled document';\n\n      if (options.importFromJSON && options.importFromJSON.title) {\n        name = options.importFromJSON.title;\n      }\n\n      options.name = name;\n    }\n    /**\r\n     * set the user information\r\n     * @description the default user is random if it is not stored in local storage of the browser.\r\n     */\n\n  }, {\n    key: \"setUser\",\n    value: function setUser(options) {\n      var uid = this.GUID();\n      var randomId = {\n        id: uid,\n        pseudo: 'Anonymous'\n      };\n      var localStorageUser = {};\n\n      if (store.get('config')) {\n        var config = store.get('config');\n        localStorageUser = {\n          id: config.id,\n          pseudo: config.pseudo\n        };\n      }\n\n      options.user = Object.assign(randomId, localStorageUser);\n    } //TODO: Make this global to use the same server for all the documents\n\n    /**\r\n     * set WebRTCOptions\r\n     * @description  set the default options of ice Servers and replace them by the ice server if it is possible. if it run in node js use wrtc.\r\n     */\n\n  }, {\n    key: \"setWebRTCOptions\",\n    value: function () {\n      var _setWebRTCOptions = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(options) {\n        var defaultICE, twilioICEs, iceServers;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (options.foglet) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                defaultICE = [{\n                  url: options.stun,\n                  urls: options.stun\n                }];\n                _context3.next = 4;\n                return this.getICEs(options);\n\n              case 4:\n                twilioICEs = _context3.sent;\n                iceServers = Object.assign(defaultICE, twilioICEs);\n                options.webRTCOptions = {\n                  trickle: true,\n                  config: {\n                    iceServers: iceServers\n                  }\n                };\n\n                if (options.wrtc) {\n                  options.webRTCOptions.wrtc = options.wrtc;\n                }\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function setWebRTCOptions(_x5) {\n        return _setWebRTCOptions.apply(this, arguments);\n      };\n    }()\n    /**\r\n     * Get ICES\r\n     * @description  Twillo is used to get list of ICEs servers, the script that generates the list of the servers is in the configuration \"https://carteserver.herokuapp.com/ice\"\r\n     * @return arrays of ICE objects {url, urls, username, credential}\r\n     */\n\n  }, {\n    key: \"getICEs\",\n    value: function () {\n      var _getICEs = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(options) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var url = options.ICEsURL || 'https://carteserver.herokuapp.com/ice';\n\n                  if (url) {\n                    fetch(url).then(function (resp) {\n                      return resp.json();\n                    }) // Transform the data into json\n                    .then(function (addresses) {\n                      var ICEs = addresses.ice.map(function (ice) {\n                        ice.urls = ice.url;\n                        return ice;\n                      });\n                      resolve(ICEs);\n                    });\n                  } else {\n                    reject('no ICEsURL in url');\n                  }\n                }));\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function getICEs(_x6) {\n        return _getICEs.apply(this, arguments);\n      };\n    }()\n    /**\r\n     * set Signaling Options this includes the session ID and the signaling server\r\n     *\r\n     */\n\n  }, {\n    key: \"setSignalingOptions\",\n    value: function setSignalingOptions(options, sessionId) {\n      // Storage Server\n      var defaultOptions = {\n        address: 'https://carteserver.herokuapp.com',\n        session: sessionId\n      };\n      options.signalingOptions = Object.assign(defaultOptions, options.signalingOptions);\n\n      if (!options.storageServer) {\n        options.storageServer = '';\n      }\n    }\n    /**\r\n     * load Local data if they exist\r\n     */\n\n  }, {\n    key: \"getLocalStorageData\",\n    value: function getLocalStorageData(options) {\n      var sessionID = options.signalingOptions.session;\n\n      if (store.get('CRATE2-' + sessionID)) {\n        options.importFromJSON = store.get('CRATE2-' + sessionID);\n        options.signalingOptions = options.importFromJSON.signalingOptions;\n      }\n    }\n    /**\r\n     * set foglet options\r\n     * @param {*} options {editingSessionID,signalingOptions:{address,session}}\r\n     */\n\n  }, {\n    key: \"setFogletOptions\",\n    value: function setFogletOptions(options) {\n      var userId = options.editingSessionID;\n      var room = options.signalingOptions.session;\n      var address = options.signalingOptions.address;\n      var webrtc = options.webRTCOptions;\n      var rps = options.rps;\n      var fogletOptions = {\n        id: userId,\n        verbose: true,\n        // want some logs ? switch to false otherwise\n        rps: this.getRpsOptions(room, address, webrtc, rps)\n      };\n      options = Object.assign(options, {\n        fogletOptions: fogletOptions\n      });\n    }\n    /**\r\n     * @param {*} room  this is the id of the session, in crate it is the id of the document\r\n     * @param {*} signalingServer the signaling server of foglet\r\n     * @param {*} webrtc {config:{iceServers:[],trickle: bool}}\r\n     * @param {*} rps rps might be cyclon (maxPeers) or spray-wrtc (a,b)\r\n     */\n\n  }, {\n    key: \"getRpsOptions\",\n    value: function getRpsOptions(room, signalingServer, webrtc) {\n      var rps = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var defaultRps = {\n        type: 'cyclon',\n        //spray-wrtc,cyclon\n        options: {\n          maxPeers: 10,\n          a: 1,\n          b: 5,\n          protocol: room,\n          // foglet running on the protocol foglet-example, defined for spray-wrtc\n          webrtc: webrtc,\n          timeout: 10 * 1000,\n          // spray-wrtc timeout before definitively close a WebRTC connection.\n          pendingTimeout: 5 * 1000,\n          delta: 120 * 1000,\n          // spray-wrtc shuffle interval\n          signaling: {\n            address: signalingServer,\n            room: room // signaling options\n\n          }\n        }\n      };\n      var rpsOptions = Object.assign(defaultRps, rps);\n      return rpsOptions;\n    }\n  }, {\n    key: \"getNewFoglet\",\n    value: function getNewFoglet(options) {\n      return new Foglet(options.fogletOptions);\n    }\n  }, {\n    key: \"setDocumentActivityTimeout\",\n    value: function setDocumentActivityTimeout(options) {\n      var documentActivityTimeout = options.documentActivityTimeout || 120 * 1000;\n      Object.assign(options, {\n        documentActivityTimeout: documentActivityTimeout\n      });\n    }\n    /**\r\n     * Function that generates random ID.\r\n     * @returns random string\r\n     */\n\n  }, {\n    key: \"GUID\",\n    value: function GUID() {\n      return _GUID();\n    }\n  }]);\n\n  return DocumentBuilder;\n}(EventEmitter);\n\nexport { DocumentBuilder as default };","import _regeneratorRuntime from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport Marker from './view/marker';\nimport { ErrorHandler } from './helpers/ErrorHandler';\nimport DocumentBuilder from './DocumentBuilder';\nimport { GUID } from './helpers/randomID';\n/**\r\n * @typedef {Object} Core\r\n * @property {Object} documentBuilder the builder of the documents\r\n * @property {Document[]} _documents the list of the documents in the session\r\n * @property {number[]} _documentsIds The index ids of the documents\r\n * @property {number} actualSessionIndex the index id of the actual document\r\n *\r\n */\n\nvar Crate =\n/*#__PURE__*/\nfunction () {\n  function Crate() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var documentBuilder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, Crate);\n\n    if (!documentBuilder) {\n      documentBuilder = DocumentBuilder;\n    }\n\n    this.documentBuilder = new documentBuilder(options, this); // key=index,value=session\n\n    this._documents = []; // key=sessionId,value=documentIndex\n\n    this._documentsIds = new Map();\n    this.actualSessionIndex = -1;\n    window.crate = this;\n  }\n  /**\r\n   * Get all document indexes\r\n   */\n\n\n  _createClass(Crate, [{\n    key: \"getDocumentIndexs\",\n    value: function getDocumentIndexs() {\n      var keys = Array.from(this._documents.keys());\n      return keys;\n    }\n    /**\r\n     * Get document by its index\r\n     * @param {*} index  it is index in the core\r\n     * @deprecated\r\n     */\n\n  }, {\n    key: \"getDocument\",\n    value: function getDocument(index) {\n      return this._documents[index];\n    }\n    /**\r\n     * Get document by its index\r\n     * @param {*} index  it is index in the core\r\n     */\n\n  }, {\n    key: \"getDocumentByIndex\",\n    value: function getDocumentByIndex(index) {\n      return this._documents[index];\n    }\n    /**\r\n     * Get document by its document Id\r\n     * @param {string} documentId  it is index in the core\r\n     */\n\n  }, {\n    key: \"getDocumentByDocumentId\",\n    value: function getDocumentByDocumentId(documentId) {\n      var index = this.getIndexFromDocumentId(documentId);\n      return this._documents[index];\n    }\n  }, {\n    key: \"getNumberOfDocuments\",\n    value: function getNumberOfDocuments() {\n      return this._documents.length;\n    }\n    /**\r\n     * Create a new document ans set it as actual document\r\n     * @param {string} documentId the id of the document\r\n     * @param {Object} specialOpts special options that override the default options\r\n     * @returns {void|Core}\r\n     */\n\n  }, {\n    key: \"createNewDocument\",\n    value: function () {\n      var _createNewDocument = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(documentId) {\n        var _this = this;\n\n        var specialOpts,\n            documentIndex,\n            _documentIndex,\n            doc,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                specialOpts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n                documentIndex = this.getIndexFromDocumentId(documentId);\n\n                if (!(!documentIndex && documentIndex != 0)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _documentIndex = this.getNumberOfDocuments();\n                _context.next = 6;\n                return this.documentBuilder.buildDocument(documentId, _documentIndex, null, specialOpts);\n\n              case 6:\n                doc = _context.sent;\n\n                this._documentsIds.set(documentId, _documentIndex);\n\n                this.addDocument(doc);\n                doc.init().then(function () {\n                  _this.setActualDocument(documentId);\n                });\n                return _context.abrupt(\"return\", doc);\n\n              case 13:\n                throw new Error('The session exist');\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function createNewDocument(_x) {\n        return _createNewDocument.apply(this, arguments);\n      };\n    }()\n    /**\r\n     * add document to list of documents\r\n     * @param {Document} document\r\n     */\n\n  }, {\n    key: \"addDocument\",\n    value: function addDocument(document) {\n      this._documents.push(document);\n\n      this.updateView();\n    }\n    /**\r\n     *  remove document and update the status of the different documents\r\n     * @param {number} documentIndex\r\n     */\n\n  }, {\n    key: \"removeDocument\",\n    value: function removeDocument(documentIndex) {\n      var _this2 = this;\n\n      if (this.exist(documentIndex)) {\n        //Change the index off all the documentIndexs that are greater than documentIndex\n        this.getDocumentIndexs().filter(function (index) {\n          return index > documentIndex;\n        }).map(function (index) {\n          return _this2.getDocument(index);\n        }).map(function (document) {\n          _this2._documentsIds.set(_this2.getDocumentIdFromIndex(document.documentIndex), document.documentIndex - 1);\n\n          document.documentIndex -= 1;\n        });\n        var documentId = this.getDocumentIdFromIndex(documentIndex);\n\n        this._documentsIds.delete(documentId); //change the new index in  the session\n\n\n        this._documents.splice(documentIndex, 1);\n\n        this.updateActualDocumentIndex(documentIndex);\n        this.updateView();\n      } else {\n        throw new ErrorHandler().SESSION_NOT_FOUND(documentIndex);\n      }\n    }\n    /**\r\n     * Update the actual document index after removing a document\r\n     * @param {number} removedIndex\r\n     */\n\n  }, {\n    key: \"updateActualDocumentIndex\",\n    value: function updateActualDocumentIndex(removedIndex) {\n      // if we remove the selected document move to previous if exist, else move to next if exist, else set  actualSessionIndex = -1\n      if (this.actualSessionIndex === removedIndex) {\n        if (this.exist(removedIndex - 1)) {\n          this.setActualDocument(this.getDocumentIdFromIndex(removedIndex - 1));\n        } else if (this.exist(removedIndex + 1)) {\n          this.setActualDocument(this.getDocumentIdFromIndex(removedIndex + 1));\n        } else {\n          this.actualSessionIndex = -1;\n        }\n      } else if (this.actualSessionIndex > removedIndex) {\n        this.actualSessionIndex--;\n      }\n    }\n    /**\r\n     * Emit FocusIn event to the document with documentIndex index\r\n     * @param {number} documentIndex\r\n     */\n\n  }, {\n    key: \"focusInToDocument\",\n    value: function focusInToDocument(documentIndex) {\n      if (this.exist(documentIndex)) {\n        this.getDocument(documentIndex).emit('FocusIn');\n      } else {\n        throw new ErrorHandler().SESSION_NOT_FOUND(documentIndex);\n      }\n    }\n    /**\r\n     * Emit FocusOut event to the document with documentIndex index\r\n     * @param {number} documentIndex\r\n     */\n\n  }, {\n    key: \"focusOutToDocument\",\n    value: function focusOutToDocument(documentIndex) {\n      if (this.exist(documentIndex)) {\n        this.getDocument(documentIndex).emit('FocusOut');\n      } else {\n        throw ErrorHandler().SESSION_NOT_FOUND(documentIndex);\n      }\n    }\n    /**\r\n     * get Document Index from document Id\r\n     * @param {string} documentId\r\n     * @returns {number} documentIndex\r\n     */\n\n  }, {\n    key: \"getIndexFromDocumentId\",\n    value: function getIndexFromDocumentId(documentId) {\n      return this._documentsIds.get(documentId);\n    }\n    /**\r\n     * get Document Id from document Index\r\n     * @param {number} documentIndex\r\n     * @returns {string} documentId\r\n     */\n\n  }, {\n    key: \"getDocumentIdFromIndex\",\n    value: function getDocumentIdFromIndex(documentIndex) {\n      return this.getDocument(documentIndex).documentId;\n    }\n    /**\r\n     * Set actual document by document Id. The actual document is the document that w're editing\r\n     * @param {string} documentId\r\n     */\n\n  }, {\n    key: \"setActualDocument\",\n    value: function setActualDocument(documentId) {\n      var _this3 = this;\n\n      var documentIndex = this.getIndexFromDocumentId(documentId);\n\n      if (documentIndex === undefined) {\n        throw Error('Document ' + documentId + ' dose not exist');\n      } else if (this.actualSessionIndex != documentIndex) {\n        this.actualSessionIndex = documentIndex;\n        this.focusInToDocument(documentIndex); //emit FocusOut to all other sessions\n\n        this.getDocumentIndexs().filter(function (index) {\n          return index != documentIndex;\n        }).forEach(function (documentIndex) {\n          return _this3.focusOutToDocument(documentIndex);\n        });\n      }\n    }\n    /**\r\n     * get actual document index\r\n     * @returns {Document}\r\n     *    */\n\n  }, {\n    key: \"getActualDocument\",\n    value: function getActualDocument() {\n      return this.getDocument(this.actualSessionIndex);\n    }\n    /**\r\n     * Emit 'UpdateView' to all the documents\r\n     */\n\n  }, {\n    key: \"updateView\",\n    value: function updateView() {\n      var _this4 = this;\n\n      this.getDocumentIndexs().forEach(function (documentIndex) {\n        _this4.getDocument(documentIndex).emit('UpdateView', _this4.getNumberOfDocuments());\n      });\n    }\n    /**\r\n     * Focus on the next document (it dose exist)\r\n     */\n\n  }, {\n    key: \"moveToNext\",\n    value: function moveToNext() {\n      return this.moveTo(this.actualSessionIndex + 1);\n    }\n    /**\r\n     * Focus on the Previous document (it dose exist)\r\n     */\n\n  }, {\n    key: \"moveToPrevious\",\n    value: function moveToPrevious() {\n      return this.moveTo(this.actualSessionIndex - 1);\n    }\n    /**\r\n     * Move to a given document index\r\n     * @param {number} documentIndex\r\n     * @returns {Core} document\r\n     */\n\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(documentIndex) {\n      if (this.exist(documentIndex)) {\n        this.setActualDocument(this.getDocumentIdFromIndex(documentIndex));\n      }\n\n      return this;\n    }\n    /**\r\n     * Dose the given documment index exist in the list of documents\r\n     * @param {number} documentIndex\r\n     */\n\n  }, {\n    key: \"exist\",\n    value: function exist(documentIndex) {\n      return this.getDocument(documentIndex) !== undefined;\n    }\n    /**\r\n     * Get random Id, this used for documents and for users\r\n     * @returns {string} random Id\r\n     */\n\n  }], [{\n    key: \"getRandomId\",\n    value: function getRandomId() {\n      return GUID();\n    }\n  }]);\n\n  return Crate;\n}();\n\nexport { Crate as default };\nCrate.Marker = Marker;","import { combineReducers } from 'redux'\r\nimport Crate from 'crate-core'\r\nconst store = require('store')\r\n\r\nlet config = {}\r\n// check if there is no id create random Id\r\nif (!store.get('config')) {\r\n  config.id = Crate.getRandomId()\r\n  config.pseudo = Crate.Marker.getPseudoname(config.id)\r\n  config.signalingServer = 'https://carteserver.herokuapp.com'\r\n  config.storageServer = 'https://storagecrate.herokuapp.com'\r\n  config.ICEsURL = 'https://carteserver.herokuapp.com/ice'\r\n  config.stunTurn = '23.21.150.121'\r\n  store.set('config', config)\r\n}\r\n\r\nconst initialState = {\r\n  configuration: store.get('config')\r\n}\r\n\r\nconst rootReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'CONFIG':\r\n      return {\r\n        ...state,\r\n        configuration: { ...state.configuration, ...action.payload }\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default rootReducer\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"../reducers/index\";\r\nconst store = createStore(rootReducer);\r\nexport default store;","var showdown  = require('showdown')\r\nexport default class Converter{\r\n\r\n    static getHtmlFromMarkDown(markdown){\r\n        const  converter = new showdown.Converter();\r\n        const html  = converter.makeHtml(markdown);\r\n        return html\r\n    }\r\n\r\n\r\n}","import React, { Component } from 'react'\r\nimport Converter from './Converter'\r\nexport default class Home extends Component {\r\n  getMarkDownContent() {\r\n    const content = `\r\n<img src=\"/logo.png\" alt=\"SOOCRATE\" style=\"display: block;margin-left: auto;margin-right: auto;width: 50%;margin-top: -12%;margin-bottom: 12%;\">\r\n\r\nSoocrate is developed within three research projects: \"Web of Browsers\" in collaboration with the company [APIZEE](https://apizee.com/) and the [ASAP](https://www.irisa.fr/asap/), the CominLabs project [DESCENT](http://www.descent.cominlabs.ueb.eu/) and the ANR project [SocioPlug](http://socioplug.univ-nantes.fr/). \r\nThe Soocrate editor is mainly developed by [GDD team](https://sites.google.com/site/gddlina/), [LINA](https://www.lina.univ-nantes.fr/), [Nantes University](http://www.univ-nantes.fr/)\r\n\r\n**Soocrate** aims to enable collaborative editing anywhere, at anytime, whatever the number of participants, without third party. Compared to Google Docs:\r\n            \r\n- **Soocrate**  does not limit the number of simultaneous users,\r\n                \r\n- **Soocrate**  does not rely on service providers, thus your documents belong to you and whom you trust.\r\n\r\n> **Note:** **Soocrate**  is still in its very early stage of development. Therefore, the application may be buggy. Also, even basic functionalities are not implemented yet. \r\nFeel free to [request functionalities, report issues, and ask questions](https://github.com/nhaouari/CRATE/issues).`\r\n\r\n    return content\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"textContent\"\r\n        dangerouslySetInnerHTML={{\r\n          __html: Converter.getHtmlFromMarkDown(this.getMarkDownContent())\r\n        }}\r\n      />\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport Converter from './Converter'\r\nexport default class About extends Component {\r\n  getMarkDownContent() {\r\n    const content = `\r\n#About\r\n## Web of Browsers\r\n\r\nThe project \"Web of Browsers\" in collaboration with the [ASAP](https://www.irisa.fr/asap/) team of IRISA and the company [APIZEE](https://apizee.com/). It's about building a web capable of running without web servers, just using the capabilities of web browsers.\r\n\r\nWeb browsers are the most popular runtime environment in the world. Originally they was a simple HTML readers, but they can run complex applications that interact with humans and web services. The recent introduction of WebRTC has further expanded the capabilities of browsers with support of direct communications between browsers. Browsers become decentralized execution environments where interactions between humans and web services are possible without the use of third parties.\r\n\r\n\r\nThis is a major evolution for: \r\n\r\n- **Privacy protection**: Many services no longer depend on service providers to function;\r\n- **For the right to be forgotten**: the services are fed by the navigators of the participants; data and services disappear if none of the participants wish to maintain them;\r\nfor scalability: Millions of participants together make an impressive computational force, crowd computing and storage.\r\n\r\nIn the \"*Web of Browsers*\" vision, the Web works without a server. It is massively decentralized and ephemeral. Web pages are hosted by web browser networks connected to each other through WebRTC. WeBrowse enables mass collaboration between participants without costly infrastructure while maintaining confidentiality of the exchanges. WeBrowse allows users to edit web pages anytime, anywhere, regardless of the number of participants.\r\n\r\nIn the \"**Web of Browsers**\" view, URIs no longer refer to HTML pages or data, but to **Web sessions**. A web session is a network of browsers hosting documents (HTML pages, data, etc.). As in the classic Web, a document can reference other documents using session URIs. Navigation is possible. If a user follows the link of a web session, the user's web browser joins the browser network of that session and hosts the documents for that session.\r\nJust like in Google Docs, every web session lets you edit documents or data in real time. However, unlike Google Docs, Web sessions do not depend on a central server and do not have limits on the number of browsers that modify a particular document --- as demonstrated by the CRATE prototype [NMM16, NMM17] .\r\n\r\nThe Web browsers is quite different from the classic Web:\r\n- This web forgets by default, i.e., if no user wants to share a web page, then this page disappears. We think it's a good thing. Indeed, the persistence of a page should require additional effort when the loss of information (forgetting) should be the default behavior.\r\n- This Web can be more respectful of privacy: Web pages can work without the intervention of third parties.\r\n- This Web can be hosted on high latency or disconnected networks. Sending information is based on the spread of rumors, i.e, this Web can be deployed on adhoc or very high latency networks.\r\nThis Web is able to evolve in real time.\r\n\r\nThe goal of this project is to build and experiment the **Web Browsers**. We are targeting events such as Open and Massive Online Courses (MOOCs), TV shows, conferences bringing together many people [BPD13]. We believe that WeBrowse should allow users to edit web pages anytime, anywhere, regardless of the number of participants. Even if only a small group of users among millions of participants wrote, all participants must be able to read and write in real time when they wish. In 2013, Coursera gathered 41,000 students for a MOOC entitled \"Fundamentals of Online Education: Planning and Application\". However, the course relied on Google's collaborative tools that allow simultaneous editing only to a limited number of users. The result was described as a \"disaster\" according to the journalists [ORE13, STR13]. This example clearly demonstrates the relevance of this use case for large groups. [TRA12] reports similar problems in a large-scale collaborative publishing context.\r\n\r\n## References\r\n\r\n- [NMM17] Brice Ndelec, Pascal Molli, Achour Mostefaoui. A scalable sequence encoding for collaborative editing. Concurrency and Computation: Practice and Experience. DOI:10.1002/cpe.4108\r\n\r\n- [NMM16] Brice Ndelec, Pascal Molli, Achour Mostfaoui, CRATE: Writing Stories Together with our Browsers. Demo 25th World Wide Web Conference 2016. CRATE is a real-time distributed and decentralized CollaboRATive Editor running in web browsers. [https://github.com/Chat-Wane/CRATE](https://github.com/Chat-Wane/CRATE)\r\n\r\n- [BPD13] L. B. Breslow, D. E. Pritchard, J. DeBoer, G. S. Stump, A. D. Ho, and D. T. Seaton. Studying learning in the worldwide classroom: Research into edxs first mooc. Research & Practice in Assessment, 8:1325, 2013.\r\n\r\n- [ORE13] W. Oremus. Online class on how to teach online classes goes laughably awry. Slate US, february 2013.\r\n\r\n- [STR13] V. Strauss. How online class about online learning failed miserably. Washington Post, february 2013.\r\n\r\n- [TRA12] B. Tomlinson, J. Ross, P. Andre, E. Baumer, D. Patterson, J. Corneli, M. Mahaux, S. Nobarany, M. Lazzari, B. Penzenstadler, A. Torrance, D. Callele, G. Olson, S. Silberman, M. Stunder, F. R. Palamedi, A. A. Salah, E. Morrill, X. Franch, F. F. Mueller, J. J. Kaye, R. W. Black, M. L. Cohn, P. C. Shih, J. Brewer, N. Goyal, P. Nakki, J. Huang, N. Baghaei, and C. Saper. Massively distributed authorship of academic papers. In CHI 12 Extended Abstracts on Human Factors in Computing Systems, CHI EA 12, pages 1120, New York, NY, USA, 2012. ACM.\r\n\r\n- [FMP+16] Davide Frey, Achour Mostefaoui, Matthieu Perrin, Pierre-Louis Roman, and Franois Taani. Speed for the elite, consistency for the masses: differentiating eventual consistency in large-scale distributed systems, Proceedings of the 35th Symposium on Reliable Distributed Systems (SRDS 2016), Budapest, Hungary, September, 2016 (10p.)\r\n\r\n- [NTD15] Brice Ndelec, Julian Tanke, Davide Frey, Pascal Molli, Achour Mostefaoui. Spray: an Adaptive Random Peer Sampling Protocol. [Technical Report] LINA-University of Nantes; INRIA Rennes - Bretagne Atlantique. 2015. <hal-01203363>\r\n`\r\n    return content\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        dangerouslySetInnerHTML={{\r\n          __html: Converter.getHtmlFromMarkDown(this.getMarkDownContent())\r\n        }}\r\n        className=\"textContent\"\r\n      />\r\n    )\r\n  }\r\n}\r\n","\r\nconst store = require('store')\r\nconst updateConfiguration=(config)=>{\r\n\r\n    store.set('config',config)\r\n\r\n    return {\r\n    type:'CONFIG',\r\n    payload:config\r\n}\r\n}\r\n\r\nexport default updateConfiguration","import React from 'react'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardActions from '@material-ui/core/CardActions'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport styles from './Configuration.module.css'\r\n\r\nimport { connect } from 'react-redux'\r\nimport updateConfiguration from '../actions/configuration'\r\nimport { bindActionCreators } from 'redux'\r\nimport Crate from 'crate-core'\r\n\r\nclass Configuration extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    let config = {\r\n      id: '',\r\n      pseudo: '',\r\n      signalingServer: '',\r\n      storageServer: '',\r\n      stunTurn: ''\r\n    }\r\n\r\n    if (this.props.configuration) {\r\n      config = { ...config, ...this.props.configuration }\r\n    }\r\n    this.state = config\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"textContent\">\r\n        <h1>Configuration</h1>\r\n        <form className={styles.container} noValidate autoComplete=\"off\">\r\n          <Card className={styles.card}>\r\n            <CardContent>\r\n              <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                Identity\r\n              </Typography>\r\n              <Grid container spacing={12}>\r\n                <Grid item xs={6}>\r\n                  <TextField\r\n                    disabled\r\n                    id=\"id\"\r\n                    label=\"Identifier\"\r\n                    style={{ margin: 8 }}\r\n                    placeholder=\"Random Identifier\"\r\n                    helperText=\"This is a random user Id\"\r\n                    fullWidth\r\n                    value={this.state.id}\r\n                    onChange={e => {\r\n                      this.setState({ id: e.target.value })\r\n                    }}\r\n                    margin=\"normal\"\r\n                    variant=\"outlined\"\r\n                    InputLabelProps={{\r\n                      shrink: true\r\n                    }}\r\n                  />\r\n                  <TextField\r\n                    id=\"pseudo\"\r\n                    label=\"Pseudo Name\"\r\n                    style={{ margin: 8 }}\r\n                    placeholder=\"Pseudo Name\"\r\n                    helperText=\"Enter please the your Pseudo Name *\"\r\n                    fullWidth\r\n                    value={this.state.pseudo}\r\n                    onChange={e => {\r\n                      this.setState({ pseudo: e.target.value })\r\n                    }}\r\n                    margin=\"normal\"\r\n                    variant=\"outlined\"\r\n                    InputLabelProps={{\r\n                      shrink: true\r\n                    }}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <div\r\n                    className={styles.avatar}\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: Crate.Marker.getAvatar(this.state.id)\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n            <CardActions className={styles.submit}>\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => {\r\n                  const id = Crate.getRandomId()\r\n                  const pseudoName = Crate.Marker.getPseudoname(id)\r\n\r\n                  this.setState({ pseudo: pseudoName })\r\n                  this.setState({ id: id })\r\n                }}\r\n              >\r\n                Generate New ID\r\n              </Button>\r\n            </CardActions>\r\n          </Card>\r\n          <Card className={styles.card}>\r\n            <CardContent>\r\n              <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                Communication\r\n              </Typography>\r\n\r\n              <TextField\r\n                id=\"signalingServer\"\r\n                label=\"Signaling Server\"\r\n                style={{ margin: 8 }}\r\n                htmlFor=\"component-error\"\r\n                placeholder=\"Signaling server\"\r\n                helperText=\"Enter please the signaling server address for example: https://carteserver.herokuapp.com\"\r\n                fullWidth\r\n                value={this.state.signalingServer}\r\n                onChange={e => {\r\n                  this.setState({ signalingServer: e.target.value })\r\n                }}\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n                InputLabelProps={{\r\n                  shrink: true\r\n                }}\r\n              />\r\n\r\n              <TextField\r\n                id=\"storageServer\"\r\n                label=\"Storage Server\"\r\n                style={{ margin: 8 }}\r\n                placeholder=\"Storage server\"\r\n                helperText=\"Enter please the storage server address for example: https://storagecrate.herokuapp.com\"\r\n                fullWidth\r\n                value={this.state.storageServer}\r\n                onChange={e => {\r\n                  this.setState({ storageServer: e.target.value })\r\n                }}\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n                InputLabelProps={{\r\n                  shrink: true\r\n                }}\r\n              />\r\n\r\n              <TextField\r\n                id=\"stun\"\r\n                label=\"STUN/TURN\"\r\n                style={{ margin: 8 }}\r\n                placeholder=\"STUN/TURN address\"\r\n                helperText=\"Enter please the STUN or Turn server address for example:23.21.150.121\"\r\n                fullWidth\r\n                value={this.state.stunTurn}\r\n                onChange={e => {\r\n                  this.setState({ stunTurn: e.target.value })\r\n                }}\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n                InputLabelProps={{\r\n                  shrink: true\r\n                }}\r\n              />\r\n            </CardContent>\r\n            <CardActions />\r\n          </Card>\r\n\r\n          <div className={styles.submit}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={() => {\r\n                this.props.updateConfiguration({ ...this.state })\r\n              }}\r\n              className={styles.button}\r\n            >\r\n              Save\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return { configuration: state.configuration }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    { updateConfiguration: updateConfiguration },\r\n    dispatch\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Configuration)\r\n","import React, { Component } from 'react'\r\nimport Converter from './Converter'\r\nimport Crate from 'crate-core'\r\nimport styles from './NewDocument.module.css'\r\nconst store = require('store')\r\n\r\nexport default class NewDocument extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.documentId = this.props.match.params.documentId\r\n    const defaultConfig = this.getConfig()\r\n    this.crate = new Crate(defaultConfig)\r\n  }\r\n  getConfig() {\r\n    const configuration = store.get('config')\r\n\r\n    const defaultConfig = {\r\n      signalingOptions: {\r\n        address: configuration.signalingServer\r\n      },\r\n      storageServer: configuration.storageServer,\r\n      stun: configuration.stunTurn, // default google ones if xirsys not\r\n      ICEsURL: configuration.ICEsURL,\r\n      containerID: 'content-default',\r\n      display: true,\r\n      PingPeriod: 100000,\r\n      AntiEntropyPeriod: 100000,\r\n      documentActivityTimeout: 120000\r\n    }\r\n    return defaultConfig\r\n  }\r\n  componentDidMount() {\r\n    this.initCrate()\r\n  }\r\n\r\n  initCrate() {\r\n    this.crate.createNewDocument(this.documentId)\r\n  }\r\n\r\n  render() {\r\n    return <div id=\"content-default\" className={styles.document} />\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport Converter from './Converter'\r\nexport default class Publications extends Component {\r\n  getMarkDownContent() {\r\n    const content = `\r\n#Publications\r\n[1] Ndelec, B., Molli, P., Mostefaoui, A., & Desmontils, E. (2013,\r\nSeptember). [LSEQ: an adaptive structure for sequences in distributed\r\ncollaborative\r\nediting](http://hal.univ-nantes.fr/docs/00/92/16/33/PDF/fp025-nedelec.pdf). <i>In\r\nProceedings of the 2013 ACM symposium on Document engineering (pp. 37-46).</i> ACM.\r\n\r\n[2] Ndelec, B., Molli, P., Mostefaoui, A., & Desmontils,\r\nE. (2013). [Concurrency effects over variable-size identifiers in distributed\r\ncollaborative\r\nediting](https://hal.archives-ouvertes.fr/hal-00921655/document). <i>In\r\nDocument Changes: Modeling, Detection, Storage and Visualization (Vol. 1008,\r\npp. 0-7).</i>\r\n\r\n[3] Ndelec, B., Tanke, J., Frey, D., Molli, P., Mostefaoui, A. (2015).\r\n[Spray, an Adaptive Random Peer Sampling Protocol](https://hal.archives-ouvertes.fr/hal-01203363/file/spray.pdf). <i>Technical Report.</i>`\r\n\r\n    return content\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        dangerouslySetInnerHTML={{\r\n          __html: Converter.getHtmlFromMarkDown(this.getMarkDownContent())\r\n        }}\r\n        className=\"textContent\"\r\n      />\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport classNames from 'classnames'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TablePagination from '@material-ui/core/TablePagination'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport FilterListIcon from '@material-ui/icons/FilterList'\r\nimport { lighten } from '@material-ui/core/styles/colorManipulator'\r\nimport { Link } from 'react-router-dom'\r\nimport { styles } from './Storage.module.css'\r\nvar dateFormat = require('dateformat')\r\nconst store = require('store')\r\nlet counter = 0\r\n\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n  counter += 1\r\n  return { id: counter, name, calories, fat, carbs, protein }\r\n}\r\n\r\nfunction desc(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1\r\n  }\r\n  return 0\r\n}\r\n\r\nfunction stableSort(array, cmp) {\r\n  const stabilizedThis = array.map((el, index) => [el, index])\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = cmp(a[0], b[0])\r\n    if (order !== 0) return order\r\n    return a[1] - b[1]\r\n  })\r\n  return stabilizedThis.map(el => el[0])\r\n}\r\n\r\nfunction getSorting(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => desc(a, b, orderBy)\r\n    : (a, b) => -desc(a, b, orderBy)\r\n}\r\n\r\nconst rows = [\r\n  { id: 'title', numeric: false, disablePadding: true, label: 'Title' },\r\n  { id: 'date', numeric: false, disablePadding: false, label: 'Date' },\r\n  { id: 'link', numeric: false, disablePadding: false, label: 'link' }\r\n]\r\n\r\nfunction listDocuments() {\r\n  const documents = []\r\n  store.each(function(value, key) {\r\n    if (key.includes('CRATE2')) {\r\n      const id = key.split('CRATE2-')[1]\r\n      const date = dateFormat(value.date, 'dddd, mmmm dS, yyyy, h:MM:ss TT')\r\n      const title = value.title\r\n      const link = `/document/${id}`\r\n      documents.push({ id, date, title, link })\r\n    }\r\n  })\r\n  return documents\r\n}\r\n\r\nclass EnhancedTableHead extends React.Component {\r\n  createSortHandler = property => event => {\r\n    this.props.onRequestSort(event, property)\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      onSelectAllClick,\r\n      order,\r\n      orderBy,\r\n      numSelected,\r\n      rowCount\r\n    } = this.props\r\n\r\n    return (\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell padding=\"checkbox\">\r\n            <Checkbox\r\n              indeterminate={numSelected > 0 && numSelected < rowCount}\r\n              checked={numSelected === rowCount}\r\n              onChange={onSelectAllClick}\r\n            />\r\n          </TableCell>\r\n          {rows.map(row => {\r\n            return (\r\n              <TableCell\r\n                key={row.id}\r\n                numeric={row.numeric}\r\n                padding={row.disablePadding ? 'none' : 'default'}\r\n                sortDirection={orderBy === row.id ? order : false}\r\n              >\r\n                <Tooltip\r\n                  title=\"Sort\"\r\n                  placement={row.numeric ? 'bottom-end' : 'bottom-start'}\r\n                  enterDelay={300}\r\n                >\r\n                  <TableSortLabel\r\n                    active={orderBy === row.id}\r\n                    direction={order}\r\n                    onClick={this.createSortHandler(row.id)}\r\n                  >\r\n                    {row.label}\r\n                  </TableSortLabel>\r\n                </Tooltip>\r\n              </TableCell>\r\n            )\r\n          }, this)}\r\n        </TableRow>\r\n      </TableHead>\r\n    )\r\n  }\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.string.isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired\r\n}\r\n\r\nconst toolbarStyles = theme => ({\r\n  root: {\r\n    paddingRight: theme.spacing.unit\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85)\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark\r\n        },\r\n  spacer: {\r\n    flex: '1 1 100%'\r\n  },\r\n  actions: {\r\n    color: theme.palette.text.secondary\r\n  },\r\n  title: {\r\n    flex: '0 0 auto'\r\n  }\r\n})\r\n\r\nlet EnhancedTableToolbar = props => {\r\n  const { numSelected, classes, selected, updateParent } = props\r\n  return (\r\n    <Toolbar\r\n      className={classNames(classes.root, {\r\n        [classes.highlight]: numSelected > 0\r\n      })}\r\n    >\r\n      <div className={classes.title}>\r\n        {numSelected > 0 ? (\r\n          <Typography color=\"inherit\" variant=\"subtitle1\">\r\n            {numSelected} selected\r\n          </Typography>\r\n        ) : (\r\n          <Typography variant=\"h6\" id=\"tableTitle\">\r\n            Documents\r\n          </Typography>\r\n        )}\r\n      </div>\r\n      <div className={classes.spacer} />\r\n      <div className={classes.actions}>\r\n        {numSelected > 0 ? (\r\n          <Tooltip title=\"Delete\">\r\n            <IconButton aria-label=\"Delete\">\r\n              <DeleteIcon\r\n                onClick={() => {\r\n                  selected.forEach(id => {\r\n                    console.log('Remove Document ' + id)\r\n                    store.remove(`CRATE2-${id}`)\r\n                    updateParent()\r\n                  })\r\n                }}\r\n              />\r\n            </IconButton>\r\n          </Tooltip>\r\n        ) : (\r\n          <Tooltip title=\"Filter list\">\r\n            <IconButton aria-label=\"Filter list\">\r\n              <FilterListIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        )}\r\n      </div>\r\n    </Toolbar>\r\n  )\r\n}\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired\r\n}\r\n\r\nEnhancedTableToolbar = withStyles(toolbarStyles)(EnhancedTableToolbar)\r\n\r\nclass EnhancedTable extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      order: 'asc',\r\n      orderBy: 'calories',\r\n      selected: [],\r\n      data: listDocuments(),\r\n      page: 0,\r\n      rowsPerPage: 5\r\n    }\r\n\r\n    this.update = () => {\r\n      console.log('update parent')\r\n      const documents = listDocuments()\r\n      this.setState({ data: documents, selected: [] })\r\n    }\r\n    this.update = this.update.bind(this)\r\n  }\r\n\r\n  handleRequestSort = (event, property) => {\r\n    const orderBy = property\r\n    let order = 'desc'\r\n\r\n    if (this.state.orderBy === property && this.state.order === 'desc') {\r\n      order = 'asc'\r\n    }\r\n\r\n    this.setState({ order, orderBy })\r\n  }\r\n\r\n  handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      this.setState(state => ({ selected: state.data.map(n => n.id) }))\r\n      return\r\n    }\r\n    this.setState({ selected: [] })\r\n  }\r\n\r\n  handleClick = (event, id) => {\r\n    const { selected } = this.state\r\n    const selectedIndex = selected.indexOf(id)\r\n    let newSelected = []\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, id)\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1))\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1))\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      )\r\n    }\r\n\r\n    this.setState({ selected: newSelected })\r\n  }\r\n\r\n  handleChangePage = (event, page) => {\r\n    this.setState({ page })\r\n  }\r\n\r\n  handleChangeRowsPerPage = event => {\r\n    this.setState({ rowsPerPage: event.target.value })\r\n  }\r\n\r\n  isSelected = id => this.state.selected.indexOf(id) !== -1\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    const { data, order, orderBy, selected, rowsPerPage, page } = this.state\r\n    const emptyRows =\r\n      rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage)\r\n    return (\r\n      <Paper className={(classes.root, styles)}>\r\n        <EnhancedTableToolbar\r\n          numSelected={selected.length}\r\n          selected={selected}\r\n          updateParent={this.update}\r\n        />\r\n        <div className={classes.tableWrapper}>\r\n          <Table className={classes.table} aria-labelledby=\"tableTitle\">\r\n            <EnhancedTableHead\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={this.handleSelectAllClick}\r\n              onRequestSort={this.handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(data, getSorting(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map(n => {\r\n                  const isSelected = this.isSelected(n.id)\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      onClick={event => this.handleClick(event, n.id)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isSelected}\r\n                      tabIndex={-1}\r\n                      key={n.id}\r\n                      selected={isSelected}\r\n                    >\r\n                      <TableCell padding=\"checkbox\">\r\n                        <Checkbox checked={isSelected} />\r\n                      </TableCell>\r\n                      <TableCell component=\"th\" scope=\"row\" padding=\"none\">\r\n                        {n.title}\r\n                      </TableCell>\r\n                      <TableCell>{n.date}</TableCell>\r\n                      <TableCell>\r\n                        <Link to={n.link}>Open</Link>{' '}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  )\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 49 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n        <TablePagination\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          backIconButtonProps={{\r\n            'aria-label': 'Previous Page'\r\n          }}\r\n          nextIconButtonProps={{\r\n            'aria-label': 'Next Page'\r\n          }}\r\n          onChangePage={this.handleChangePage}\r\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nEnhancedTable.propTypes = {\r\n  classes: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles)(EnhancedTable)\r\n","import React, { Component } from 'react'\r\nimport Converter from './Converter'\r\nexport default class ContactUs extends Component {\r\n  getMarkDownContent() {\r\n    const content = `\r\n#Contact Us\r\n\r\n# GDD\r\nGDD is a research group of [LS2N](http://www.google.com/url?q=http%3A%2F%2Fls2n.fr&sa=D&sntz=1&usg=AFQjCNHy6s6CwrzokZFpYPk24D1m6MWHjg), [University of Nantes](http://www.google.com/url?q=http%3A%2F%2Fwww.univ-nantes.fr%2F&sa=D&sntz=1&usg=AFQjCNHKMWsK8VIf-sCLC2CcKz4Jwai7Kw). GDD stands for \"Gestion de Donnes Distribues\" that can be translated to \"Distributed Data Management\". GDD is working in federated distributed systems following 3 research directions:\r\n\r\n-   **federated data structures and consistency,**\r\n-   **collaborative data sharing in federations,**\r\n-   **security and usage control in federations.**\r\n\r\nGDD has expertise in [Distributed Systems](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FDistributed_system&sa=D&sntz=1&usg=AFQjCNFsEi7VbzZWwJFeJ9VVTIjeGi-K4w), [Distributed Collaborative Systems](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCSCW&sa=D&sntz=1&usg=AFQjCNEfL7lo_wBiI2usTnRukK_yVPTizw), [Distributed Database systems](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FDistributed_database_management_system&sa=D&sntz=1&usg=AFQjCNEHmlLVpoNG3xR7KdUIrMI34UKBzg) and [Web of Data](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSemantic_Web&sa=D&sntz=1&usg=AFQjCNGqR96_jR2bYPiqrzEH3iYOEm5vCQ). Our topics includes:\r\n\r\n-   **Fundations of distributed system; [distributed algorithms](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FDistributed_algorithm&sa=D&sntz=1&usg=AFQjCNFC6VP-BmJSNckEukWxaCU3ZZ6pIA), [consistency](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FConsistency_model&sa=D&sntz=1&usg=AFQjCNGCe0Lh75Ls1CTYv5MGcpRF2qpvhg), [replication](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FReplication_%28computing%29&sa=D&sntz=1&usg=AFQjCNFf7-XOm9rgw7cXiF_Pus2e_HnLyA), [availability](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCAP_theorem&sa=D&sntz=1&usg=AFQjCNG_POWHTdZqm4afB2Z9O1btlcZs3Q), [fault-tolerance](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCAP_theorem&sa=D&sntz=1&usg=AFQjCNG_POWHTdZqm4afB2Z9O1btlcZs3Q), [scalability](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FScalability&sa=D&sntz=1&usg=AFQjCNHNoEuH67HOthpXHPxDoVA5OY9mGA),**\r\n-   **Distributed Data Management in [Web of Data](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSemantic_Web&sa=D&sntz=1&usg=AFQjCNGqR96_jR2bYPiqrzEH3iYOEm5vCQ): [data integration](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FData_integration&sa=D&sntz=1&usg=AFQjCNEH0VDplcrxOmPsz1ERJ2QKLdxFVA), [social semantic web](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSocial_Semantic_Web&sa=D&sntz=1&usg=AFQjCNGc1OMp4I1hKmdRAsGHm-ns3FYQDA), linked data,**\r\n-   **Privacy and confidentiality in distributed data management**\r\n\r\nThese topics are present in the following scientific domains:\r\n\r\n-   [**Distributed and Parallel Computing**](http://www.google.com/url?q=http%3A%2F%2Facademic.research.microsoft.com%2FRankList%3Fentitytype%3D3%26topDomainID%3D2%26subDomainID%3D16%26last%3D0%26start%3D1%26end%3D100&sa=D&sntz=1&usg=AFQjCNEYCEQAszGp_F78W2Sq9PU321UmTw) **(ICDCS, PODC),**\r\n-   **[Databases](http://www.google.com/url?q=http%3A%2F%2Facademic.research.microsoft.com%2FRankList%3Fentitytype%3D3%26topDomainID%3D2%26subDomainID%3D18%26last%3D0%26start%3D1%26end%3D100&sa=D&sntz=1&usg=AFQjCNFGu2aZo7Dn5_qGyOja7ilSfcud3g) (VLDB,SIGMOD),**\r\n-   **[WWW](http://www.google.com/url?q=http%3A%2F%2Facademic.research.microsoft.com%2FRankList%3Fentitytype%3D3%26topDomainID%3D2%26subDomainID%3D15%26last%3D0%26start%3D1%26end%3D100&sa=D&sntz=1&usg=AFQjCNGiLFfYRWDZSit7aYmh-pASQQoZgA) and [Semantic web](http://www.google.com/url?q=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSemantic_Web&sa=D&sntz=1&usg=AFQjCNGqR96_jR2bYPiqrzEH3iYOEm5vCQ) (WWW,ISWC).**\r\n\r\nGDD is member of [Labex Comin Labs](http://www.google.com/url?q=http%3A%2F%2Fwww.cominlabs.ueb.eu%2F&sa=D&sntz=1&usg=AFQjCNFLSaeGUJN82jDo54bDjcxjyw4fZQ). The CominLabs federate the best teams from Bretagne and Nantes regions in the broad area of telecommunications, from electronic devices to wide area distributed applications over the top.\r\n\r\n\r\n# GDD Team members\r\n## Administrative Assistant\r\n\r\n-   [Sandrine THENOT](https://www.google.com/url?q=https%3A%2F%2Fls2n.fr%2Fsandrine%2F&sa=D&sntz=1&usg=AFQjCNGuaeDfcUxvxZ-lOilEzKZHJGIvwQ), Administrative assistant.\r\n\r\n## Professors\r\n\r\n-   [**Pascal Molli**](http://www.google.com/url?q=http%3A%2F%2Fpagesperso.lina.univ-nantes.fr%2F~molli-p&sa=D&sntz=1&usg=AFQjCNF7LKzC0vYkmfFTa5fMwjcJgxhl9g), Full Professor at University of Nantes since September 2010, Head of GDD.\r\n-   [**Achour Mostfaoui**](https://scholar.google.fr/citations?user=q50kTWoAAAAJ&hl=fr), Full Professor at University of Nantes since November 2011, vice-head of GDD.\r\n\r\n## Associated Professors\r\n\r\n-   [**Matthieu Perrin**](https://scholar.google.fr/citations?user=WlNyiPkAAAAJ&hl=fr), Associate Professor at University of Nantes, since September 2017\r\n-   [**Emmanuel Desmontils**](http://www.google.com/url?q=http%3A%2F%2Fwww.univ-nantes.fr%2Fdesmontils-e&sa=D&sntz=1&usg=AFQjCNGgkNtrHJvUpbZB7ycI_bMxgK7rFQ), Associate Professor at University of Nantes, since September 1998.\r\n-   [**Patricia Serrano-Alvarado**](http://www.google.com/url?q=http%3A%2F%2Fpagesperso.lina.univ-nantes.fr%2F~serrano-p%2FPatricia_Serrano_Alvarado%2F&sa=D&sntz=1&usg=AFQjCNFG3G4k1wKUtD8VHQPad-Hj0jdYgg), Associate Professor at University of Nantes.\r\n-   [**Hala Skaf-Molli**,](http://www.google.com/url?q=http%3A%2F%2Fpagesperso.lina.univ-nantes.fr%2F~skaf-h%2F&sa=D&sntz=1&usg=AFQjCNGAPA8fOx5Oz3iGMpWNLfZwdyR8bQ) Associate Professor at University of Nantes, since October 2010.\r\n-   [**Gilles Nachouki**](http://www.google.com/url?q=http%3A%2F%2Fwww.lina.univ-nantes.fr%2F%3F_Gilles-NACHOUKI_.html&sa=D&sntz=1&usg=AFQjCNHQEUhwsr8EhGv-tBG1U2QqQYUXMQ), Associate Professor at University of Nantes.\r\n\r\n## PostDoc\r\n\r\n-   Sarah El Hassad, Started in March 2018\r\n-   [Brice Ndelec](https://scholar.google.com/citations?user=LciNyd8AAAAJ&hl=fr&oi=ao), started in May 2017\r\n\r\n## Engineer\r\n\r\n-   [Nourredine Haouari](http://www.google.com/url?q=http%3A%2F%2Fwww.haouari.com%2F&sa=D&sntz=1&usg=AFQjCNH1naM4qFLV_hgihs6KeM4II2aKSA), Started in February 2018\r\n\r\n## External Collaborator\r\n\r\n-   [Alban Gaignard](http://www.google.com/url?q=http%3A%2F%2Fwww.univ-nantes.fr%2Fsite-de-l-universite-de-nantes%2Falban-gaignard--1166131.kjsp&sa=D&sntz=1&usg=AFQjCNH2fS0UIbn7OG-2hvzVkcmdottLkg), CNRS engineer, Institut du thorax, Inserm UMR 1087 / CNRS UMR 6291\r\n\r\n## Ph.D. Students\r\n\r\n-   [**Thomas Minier**](https://scholar.google.fr/citations?user=lKoIrIYAAAAJ&hl=fr)**,** Started in September 2017. Advisor: Pascal Molli, Co-Advisor: Hala Skaf\r\n-   **Arnaud Grall,** Started in October 2017, Advirsr: Pascal Molli, Co-Advisor: Hala Skaf\r\n-   **Grgoire Bonin,** Started in September 2017, Advisor: Achour Mostefaoui, Co-advisor: Matthieu Perrin\r\n-   **Benjamin Moreau,** Started in October 2017, Advisor: Pascal Molli, Co-Advisors: Patricia Serrano & Emmanuel Desmontils\r\n\r\n`\r\n\r\n    return content\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"textContent\"\r\n        dangerouslySetInnerHTML={{\r\n          __html: Converter.getHtmlFromMarkDown(this.getMarkDownContent())\r\n        }}\r\n      />\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport { connect } from \"react-redux\";\r\nimport green from '@material-ui/core/colors/green';\r\nimport amber from '@material-ui/core/colors/amber';\r\nconst styles = theme =>({\r\n        success: {\r\n        backgroundColor: green[600],\r\n      },\r\n      error: {\r\n        backgroundColor: theme.palette.error.dark,\r\n      },\r\n      info: {\r\n        backgroundColor: theme.palette.primary.dark,\r\n      },\r\n      warning: {\r\n        backgroundColor: amber[700],\r\n      },\r\n      icon: {\r\n        fontSize: 20,\r\n      },\r\n      iconVariant: {\r\n        opacity: 0.9,\r\n        marginRight: theme.spacing.unit,\r\n      },\r\n      message: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      },\r\n})\r\n\r\nclass PositionedSnackbar extends React.Component {\r\n    \r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            open: false,\r\n            message:''\r\n          }\r\n    }\r\n\r\n    \r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.configuration !== this.props.configuration) {\r\n           this.setState({open:true, message:\"Configuration Saved!\"}) \r\n        }\r\n    }\r\n    handleClick = state => () => {\r\n        this.setState({ open: true, ...state });\r\n      };\r\n    \r\n    handleClose = () => {\r\n        this.setState({ open: false });\r\n      };\r\n\r\n      render() {\r\n        const {open,message } = this.state;\r\n        return (\r\n        <div>\r\n            <Snackbar\r\n            autoHideDuration={500}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={open}\r\n            onClose={this.handleClose}\r\n            className={styles.success}\r\n            ContentProps={{\r\n              'aria-describedby': 'message-id',\r\n            }}\r\n            message={<span id=\"message-id\">{message}</span>}\r\n          />\r\n        </div>\r\n        )\r\n        }\r\n    }\r\n\r\n    const mapStateToProps = state => {\r\n        return  {...state};\r\n      };\r\n      \r\n     \r\n         \r\nexport default connect(mapStateToProps)(PositionedSnackbar)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { withStyles } from '@material-ui/core/styles'\nimport Drawer from '@material-ui/core/Drawer'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport List from '@material-ui/core/List'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport HomeIcon from '@material-ui/icons/Home'\nimport AddCircle from '@material-ui/icons/AddCircle'\nimport Build from '@material-ui/icons/Build'\nimport Info from '@material-ui/icons/Info'\nimport LibraryBooks from '@material-ui/icons/LibraryBooks'\nimport ContactMail from '@material-ui/icons/ContactMail'\nimport Storage from '@material-ui/icons/Storage'\nimport { Redirect } from 'react-router'\nimport { BrowserRouter as Router, Route, Link, Switch } from 'react-router-dom'\nimport Home from './components/pages/Home'\nimport About from './components/pages/About'\nimport Configuration from './components/pages/Configuration'\nimport NewDocument from './components/pages/NewDocument'\nimport Publications from './components/pages/Publications'\nimport LocalStorage from './components/pages/Storage'\nimport ContactUs from './components/pages/ContactUs'\nimport PositionedSnackbar from './components/Snackbar'\nimport Crate from 'crate-core'\nimport { BrowserRouter, HashRouter } from 'react-router-dom'\nimport { version } from './../package.json'\n\nimport styleCss from './App.module.css'\nconst drawerWidth = 240\n\nconst styles = theme => ({\n  root: {\n    display: 'flex'\n  },\n  appBar: {\n    background:\n      'linear-gradient(to right bottom, #d63667, #e25b72, #ed797f, #f79691, #ffb2a6)',\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginLeft: 12,\n    marginRight: 20\n  },\n  hide: {\n    display: 'none'\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: '0 8px',\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end'\n  },\n  content: {\n    'margin-top': '40px',\n    flexGrow: 1,\n    padding: theme.spacing.unit * 3,\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    marginLeft: -drawerWidth\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginLeft: 0\n  }\n})\n\nclass PersistentDrawerLeft extends React.Component {\n  constructor() {\n    super()\n  }\n  state = {\n    open: false,\n    page: 'Home'\n  }\n\n  handleDrawerOpen = () => {\n    this.setState({ open: true })\n  }\n\n  handleDrawerClose = () => {\n    this.setState({ open: false })\n  }\n\n  setPage(page) {\n    this.setState({ page: page })\n  }\n\n  render() {\n    const { classes, theme } = this.props\n    const { open } = this.state\n\n    return (\n      <HashRouter>\n        <div className={classes.root}>\n          <CssBaseline />\n          <AppBar\n            position=\"fixed\"\n            className={classNames(classes.appBar, {\n              [classes.appBarShift]: open\n            })}\n          >\n            <Toolbar disableGutters={!open}>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"Open drawer\"\n                onClick={this.handleDrawerOpen}\n                className={classNames(classes.menuButton, open && classes.hide)}\n              >\n                <MenuIcon />\n              </IconButton>\n              <div className={styleCss.logo}>\n                Soocrate\n                <sub style={{ 'font-size': 'small' }}>{version}</sub>\n              </div>\n\n              <IconButton\n                color=\"inherit\"\n                className={{\n                  display: 'flex',\n                  alignItems: 'right',\n                  position: 'absolute'\n                }}\n              />\n            </Toolbar>\n          </AppBar>\n          <Drawer\n            className={classes.drawer}\n            variant=\"persistent\"\n            anchor=\"left\"\n            open={open}\n            classes={{\n              paper: classes.drawerPaper\n            }}\n          >\n            <div className={classes.drawerHeader}>\n              <IconButton onClick={this.handleDrawerClose}>\n                {theme.direction === 'ltr' ? (\n                  <ChevronLeftIcon />\n                ) : (\n                  <ChevronRightIcon />\n                )}\n              </IconButton>\n            </div>\n            <Divider />\n            <List>\n              <ListItem button key=\"Home\" component={Link} to=\"/\">\n                <ListItemIcon>\n                  {' '}\n                  <HomeIcon />{' '}\n                </ListItemIcon>\n                <ListItemText primary=\"Home\" />\n              </ListItem>\n\n              <ListItem button key=\"Storage\" component={Link} to=\"/storage\">\n                <ListItemIcon>\n                  {' '}\n                  <Storage />{' '}\n                </ListItemIcon>\n                <ListItemText primary=\"Storage\" />\n              </ListItem>\n\n              <ListItem\n                button\n                key=\"New Document\"\n                component={Link}\n                to=\"/document\"\n              >\n                <ListItemIcon>\n                  <AddCircle />\n                </ListItemIcon>\n                <ListItemText primary=\"New Document\" />\n              </ListItem>\n\n              <ListItem\n                button\n                key=\"Configuration\"\n                component={Link}\n                to=\"/configuration\"\n              >\n                <ListItemIcon>\n                  <Build />\n                </ListItemIcon>\n                <ListItemText primary=\"Configuration\" />\n              </ListItem>\n            </List>\n            <Divider />\n            <List>\n              <ListItem button key=\"About\" component={Link} to=\"/about\">\n                <ListItemIcon>\n                  <Info />\n                </ListItemIcon>\n                <ListItemText primary=\"About\" />\n              </ListItem>\n\n              <ListItem\n                button\n                key=\"Publications\"\n                component={Link}\n                to=\"/publications\"\n              >\n                <ListItemIcon>\n                  <LibraryBooks />\n                </ListItemIcon>\n                <ListItemText primary=\"Publications\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Contact us\"\n                component={Link}\n                to=\"/contactus\"\n              >\n                <ListItemIcon>\n                  <ContactMail />\n                </ListItemIcon>\n                <ListItemText primary=\"Contact us\" />\n              </ListItem>\n            </List>\n          </Drawer>\n\n          <main\n            className={classNames(classes.content, {\n              [classes.contentShift]: open\n            })}\n          >\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n              <Route exact path=\"/about\" component={About} />\n              <Route\n                exact\n                path=\"/document\"\n                render={() => (\n                  <Redirect to={'/document/' + Crate.getRandomId()} />\n                )}\n              />\n\n              <Route\n                exact\n                path=\"/document/:documentId\"\n                component={NewDocument}\n              />\n              <Route exact path=\"/contactus\" component={ContactUs} />\n              <Route exact path=\"/configuration\" component={Configuration} />\n              <Route exact path=\"/storage\" component={LocalStorage} />\n              <Route exact path=\"/publications\" component={Publications} />\n            </Switch>\n          </main>\n          <PositionedSnackbar />\n        </div>\n      </HashRouter>\n    )\n  }\n}\n\nPersistentDrawerLeft.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles, { withTheme: true })(PersistentDrawerLeft)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from \"react-redux\";\nimport store from \"./store/index\";\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render( <Provider store={store}>\n    <App />\n  </Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n\n/**\r\n * This class is for the interface of the sharing link with QRcode\r\n */\nexport var LinkView =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * [constructor description]\r\n   * @param  {[type]} container [description]\r\n   * @param  {[type]} id        [description]\r\n   * @return {[type]}           [description]\r\n   */\n  function LinkView(container, id) {\n    _classCallCheck(this, LinkView);\n\n    this.linkContainer = jQuery('<div>').appendTo(container).css('position', 'relative').css('top', '0px').css('width', '45vw-25px').css('z-index', '0').css('opacity', '0.9').attr('id', 'linkContainer').hide(); // #0 qr code modal\n\n    var qrCodeModal = jQuery('<div>').appendTo(container).attr('id', 'modalQRCode' + id).attr('tabindex', '-1').attr('role', 'dialog').attr('aria-labelledby', 'modalQRCodeLabel').attr('aria-hidden', 'true').addClass('modal');\n    var qrCodeModalDialog = jQuery('<div>').appendTo(qrCodeModal).addClass('modal-dialog');\n    var qrCodeModalContent = jQuery('<div>').appendTo(qrCodeModalDialog).addClass('modal-content text-center');\n    this.qrcodeCanvas = jQuery('<div>');\n    qrCodeModalContent.append(jQuery('<br>')).append(this.qrcodeCanvas).append(jQuery('<br>')); // #1 overall division\n\n    this.alert = jQuery('<div>').appendTo(this.linkContainer); // #2 cross to close the division\n\n    this.dismiss = jQuery('<button>').appendTo(this.alert).attr('type', 'button').addClass('close').html('<span  aria-hidden=\"true\">&times;</span><span class=\"sr-only\"> ' + 'Close </span>');\n    var rowContainer = jQuery('<div>').appendTo(this.alert).addClass('container');\n    var inputGroup = jQuery('<div>').appendTo(rowContainer).addClass('input-group').attr('style', 'margin-left: -16px;');\n    this.input = jQuery('<input>').appendTo(inputGroup).attr('type', 'text').attr('id', 'sessionUrl').attr('placeholder', 'Nothing to see here, move along.').addClass('form-control');\n    var inputGroup2 = jQuery('<span>').appendTo(inputGroup).addClass('input-group-btn');\n    this.qrcode = jQuery('<button>').appendTo(inputGroup2).attr('aria-label', 'QR-code').attr('type', 'button').attr('data-target', '#modalQRCode' + id).attr('data-toggle', 'modal').addClass('btn btn-default').html('<i class=\"fa fa-qrcode\"></i>');\n    this.action = jQuery('<button  id=\"copyButton\">').appendTo(inputGroup2).attr('aria-label', 'Go!').attr('type', 'button').addClass('btn btn-default').html('Go!').css('z-index', '15');\n    var self = this;\n    this.dismiss.unbind(\"click\").click(function () {\n      self.linkContainer.hide();\n    });\n  }\n\n  _createClass(LinkView, [{\n    key: \"printLink\",\n\n    /**\r\n     * [printLink description]\r\n     * @param  {[type]} link [description]\r\n     * @return {[type]}      [description]\r\n     */\n    value: function printLink(link) {\n      this.linkContainer.show();\n      this.action.html('<i class=\"fa fa-clipboard\"></i>');\n      this.action.attr(\"aria-label\", \"Copy to clipboard\");\n      this.input.attr(\"readonly\", \"readonly\");\n      this.input.val(link);\n      this.qrcode.show();\n    }\n  }, {\n    key: \"printLaunchLink\",\n\n    /**\r\n     * [printLaunchLink description]\r\n     * @param  {[type]} link [description]\r\n     * @return {[type]}      [description]\r\n     */\n    value: function printLaunchLink(link) {\n      this.printLink(link);\n      this.input.attr(\"placeholder\", \"A link will appear in this field, give it to your \" + \"friend!\");\n      this.action.unbind(\"click\");\n      this.qrcode.hide();\n      return this.action;\n    }\n  }, {\n    key: \"printAnswerLink\",\n\n    /**\r\n     * [printAnswerLink description]\r\n     * @param  {[type]} link [description]\r\n     * @return {[type]}      [description]\r\n     */\n    value: function printAnswerLink(link) {\n      this.printLink(link);\n      this.input.attr(\"placeholder\", \"A link will appear in this field. Please give it \" + \"back to your friend.\");\n      this.action.unbind(\"click\");\n      this.qrcode.hide();\n      return this.action;\n    }\n  }, {\n    key: \"askLink\",\n\n    /**\r\n     * [askLink description]\r\n     * @return {[type]} [description]\r\n     */\n    value: function askLink() {\n      this.linkContainer.show();\n      this.alert.removeClass(\"alert-warning\").addClass(\"alert-info\");\n      this.action.html('Go!');\n      this.action.attr(\"aria-label\", \"Stamp the ticket\");\n      this.input.removeAttr(\"readonly\");\n      this.input.val(\"\");\n      this.action.unbind(\"click\");\n      this.qrcode.hide();\n    }\n  }, {\n    key: \"askLaunchLink\",\n\n    /**\r\n     * [askLaunchLink description]\r\n     * @return {[type]} [description]\r\n     */\n    value: function askLaunchLink() {\n      this.askLink();\n      this.input.attr(\"placeholder\", \"Please, copy the ticket of your friend here to stamp \" + \"it!\");\n      this.qrcode.hide();\n      return this.action;\n    }\n  }, {\n    key: \"askAnswerLink\",\n\n    /**\r\n     * [askAnswerLink description]\r\n     * @return {[type]} [description]\r\n     */\n    value: function askAnswerLink() {\n      this.askLink();\n      this.input.attr(\"placeholder\", \"Copy the stamped ticket to confirm \" + \"your arrival in the network\");\n      this.qrcode.hide();\n      return this.action;\n    }\n  }, {\n    key: \"hide\",\n\n    /**\r\n     * [hide description]\r\n     * @return {[type]} [description]\r\n     */\n    value: function hide() {\n      this.linkContainer.hide();\n    }\n  }]);\n\n  return LinkView;\n}();","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport tippy from 'tippy.js'; //require('$-qrcode')\n\n/**\r\n * Marker is class for managing the marker of one user,it includes the caret, avatar, and pseudo Names.\r\n */\n\nexport var StatesHeader =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * StatesHeader is class that is for showing the state of the network, share option of the document.\r\n   * @param  {[type]} model     [description]\r\n   * @param  {[type]} linkView  [description]\r\n   * @param  {[type]} shareView [description]\r\n   * @return {[type]}           [description]\r\n   */\n  function StatesHeader(model, linkView, shareView, editorContainerID) {\n    var _this = this;\n\n    _classCallCheck(this, StatesHeader);\n\n    this.model = model;\n    this.startSharingText = '<i class=\"fa fa-link fa-2x ficon2\"></i>';\n    this.startSharingTooltip = 'start sharing';\n    this.stopSharingText = '<i class=\"fa fa-unlink fa-2x ficon2\"></i>';\n    this.stopSharingTooltip = 'stop sharing';\n    this.red = '#cd2626';\n    this.yellow = '#eead0e';\n    this.green = '#228b22';\n    this.blue = '#00BFFF';\n    this._editorContainerID = editorContainerID;\n    this.networkState = $(\"#\".concat(this._editorContainerID, \" #state\"));\n    tippy(\"#\".concat(this._editorContainerID, \" #state\"), {\n      content: 'Network state',\n      theme: 'light rounded',\n      delay: 100,\n      arrow: true\n    });\n    tippy(\"#\".concat(this._editorContainerID, \" #saveicon\"), {\n      content: 'Save document',\n      theme: 'light rounded',\n      delay: 100,\n      arrow: true\n    });\n    tippy(\"#\".concat(this._editorContainerID, \" #remotesave\"), {\n      content: 'Remote save',\n      theme: 'light rounded',\n      delay: 100,\n      arrow: true\n    });\n    var sharingContainer = $(\"#\".concat(this._editorContainerID, \" #sharingContainer\"));\n    var shareIcon = $(\"#\".concat(this._editorContainerID, \" #shareicon\"));\n    var link = window.location.href.split('/');\n    link.splice(-1, 1);\n    link = link.join('/') + '/' + this.model.documentId;\n\n    var getTitle = function getTitle() {\n      var title = $(\"#\".concat(_this._editorContainerID, \" #title\")).text().replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, '');\n      return title;\n    };\n\n    sharingContainer.jsSocials({\n      url: link,\n      text: getTitle(),\n      showLabel: false,\n      showCount: false,\n      shares: ['twitter', 'facebook', 'linkedin', 'whatsapp']\n    });\n    sharingContainer.append(\"<div id=\\\"link\\\" style=\\\"display: none;\\\">\".concat(link, \"</i>\"));\n    sharingContainer.prepend(\"<h5>Share!</h5>\");\n    $(\"#\".concat(this._editorContainerID, \" #sharingContainer .jssocials-shares\")).append(\"<div class=\\\"jssocials-share\\\"><i id=\\\"copy\\\" class=\\\"fa fa-copy jssocials-share-logo\\\"></i></div>\");\n    $(\"#\".concat(this._editorContainerID, \" #sharingContainer #copy\")).click(function () {\n      _this.copyToClipboard(link);\n    });\n    tippy(\"#\".concat(this._editorContainerID, \" #shareicon\"), {\n      theme: 'light rounded',\n      arrow: true,\n      interactive: true,\n      content: document.querySelector('#sharingContainer')\n    });\n    this.setNetworkState('connected');\n    model.rps.on('open', function () {\n      _this.setNetworkState('connected');\n    });\n    model.rps.on('close', function (id) {\n      setTimeout(function () {\n        if (model._foglet.getNeighbours(Infinity).length <= 0) _this.setNetworkState('disconnected');\n      }, 5000);\n    });\n  }\n  /**\r\n   * copyLink copy the link of the document\r\n   * @return {[type]} [description]\r\n   */\n\n\n  _createClass(StatesHeader, [{\n    key: \"copyToClipboard\",\n    value: function copyToClipboard(text) {\n      var dummy = document.createElement('input');\n      document.body.appendChild(dummy);\n      dummy.setAttribute('value', text);\n      dummy.select();\n      document.execCommand('copy');\n      document.body.removeChild(dummy);\n    }\n    /**\r\n     * Set the state of the network on the browser\r\n     * @param {[type]} state set three different states according Spray protocol states:'connected', 'partiallyconnected', and 'disconnected'\r\n     */\n\n  }, {\n    key: \"setNetworkState\",\n    value: function setNetworkState(state) {\n      switch (state) {\n        case 'connected':\n          var connectedString = \"<span class='alert-success'>Congratulations!</span>\\n                     You are connected to people, and people are \\n                     connected to you. <span class='alert-info'>You can start editing \\\" \\n                     together</span>.\";\n          this.networkState.css('color', this.green);\n          this.networkState.attr('data-content', connectedString);\n          break;\n\n        case 'partiallyConnected':\n          var partiallyConnectedString = \"<span class='alert-warning'>Partially connected</span>: \\n                     either you are connected to people, or people are connected to you. \\n                     This is not great, but you <span class='alert-info'> still can edit.</span>\";\n          this.networkState.css('color', this.yellow);\n          this.networkState.attr('data-content', partiallyConnectedString);\n          break;\n\n        case 'disconnected':\n          var disconnectedString = \"<span class='alert-danger'>Disconnected</span>:\\n                     you are currently editing <span class='alert-info'>on\\n                    your own</span>.\";\n          this.networkState.css('color', this.red);\n          this.networkState.attr('data-content', disconnectedString);\n          break;\n      }\n    }\n  }]);\n\n  return StatesHeader;\n}();","import _regeneratorRuntime from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport dateformat from 'dateformat';\n\nvar debug = require('debug')('crate:view:comments');\n/**\r\n * This class is for managing the comments for quill\r\n */\n\n\nexport var Comments =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * [constructor description]\r\n   * @param  {[type]} editorContainerID [description]\r\n   * @return {[type]}                   [description]\r\n   */\n  function Comments() {\n    _classCallCheck(this, Comments);\n\n    // Selectors\n    this._commentCallback = {};\n    this.commentAddClick = this.commentAddClick.bind(this);\n    this.commentsClick = this.commentsClick.bind(this);\n  }\n\n  _createClass(Comments, [{\n    key: \"init\",\n    value: function init(editor) {\n      this._editor = editor;\n      this._authorId = this._editor._document.uid;\n      this._editorContainerID = this._editor._editorContainerID;\n      this._viewEditor = this._editor.viewEditor;\n      this._markerManager = this._editor._MarkerViewManager;\n      this.setSelectors();\n      return this;\n    }\n  }, {\n    key: \"addAuthorInformation\",\n    value: function addAuthorInformation() {\n      var commentOpt = this._viewEditor.options.modules.comment;\n      commentOpt.commentAuthorId = this._authorId;\n      commentOpt.commentAddOn = this._markerManager.getMarker(this._authorId).animal;\n      commentOpt.color = this._markerManager.getMarker(this._authorId).colorRGB;\n      return this;\n    }\n  }, {\n    key: \"setSelectors\",\n    value: function setSelectors() {\n      this._inputCommentModel = $(\"#\".concat(this._editorContainerID, \" #inputCommentModal\"));\n      this._comments = $(\"#\".concat(this._editorContainerID, \" #comments\"));\n      this._ql_editor = $(\"#\".concat(this._editorContainerID, \" .ql-editor\"));\n      this._editor = $(\"#\".concat(this._editorContainerID, \" .editor\"));\n      this._commentInput = $(\"#\".concat(this._editorContainerID, \" #commentInput\"));\n    }\n  }, {\n    key: \"commentAddClick\",\n    value: function commentAddClick(cb, self) {\n      console.log('commentAddClick is clicked');\n      this._commentCallback = cb.bind(self);\n\n      this._inputCommentModel.modal('show');\n    }\n  }, {\n    key: \"getCurrentTimestamp\",\n    value: function getCurrentTimestamp() {\n      return new Promise(function (resolve, reject) {\n        var currentTimestamp = Math.round(new Date().getTime() / 1000); // call from server\n\n        resolve(currentTimestamp);\n      });\n    }\n  }, {\n    key: \"commentsClick\",\n    value: function commentsClick() {\n      if (this._comments.is(':visible')) {\n        if (this._ql_editor.hasClass('ql-comments')) {\n          this._ql_editor.removeClass('ql-comments');\n        }\n\n        this._comments.hide();\n\n        this._comments.css('width', '0%');\n\n        this._editor.css('width', '100%');\n      } else {\n        this._comments.addClass('comment');\n\n        if (!this._editor.hasClass('ql-comments')) {\n          this._editor.addClass('ql-comments');\n        }\n\n        this._comments.css('width', '30%');\n\n        this._editor.css('width', '70%');\n\n        this._comments.show();\n      }\n    }\n  }, {\n    key: \"addCommentToList\",\n    value: function () {\n      var _addCommentToList = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var comment, currentTimestamp, authorId, marker, date, divId, opts, cmtBox;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                comment = _ref.comment, currentTimestamp = _ref.currentTimestamp, authorId = _ref.authorId;\n                marker = this._markerManager.addMarker(authorId, false, {\n                  lifetime: -1\n                });\n                date = dateFormat(new Date(), 'dddd, mmmm dS, yyyy, h:MM:ss TT');\n                divId = 'ql-comment-' + authorId + '-' + currentTimestamp;\n                opts = {\n                  id: divId,\n                  date: date,\n                  pseudoName: marker.pseudoName,\n                  colorRGB: marker.colorRGB,\n                  comment: comment,\n                  iconURL: \"./icons/\".concat(marker.animal, \".png\")\n                };\n                cmtBox = this.getCommentBoxDiv(opts);\n\n                this._comments.append(cmtBox);\n\n                this.addFocusEffects(divId);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function addCommentToList(_x) {\n        return _addCommentToList.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getCommentBoxDiv\",\n    value: function getCommentBoxDiv(opts) {\n      var cmtbox = $(\"<div class='comment-box \".concat(opts.id, \" row' id='comment-box-\").concat(opts.id, \"' tabindex=\\\"1\\\" title='\").concat(opts.date, \"'>\\n      <div class='comment-head row'>\\n        <div id=\\\"\").concat(opts.id, \"\\\"style=\\\"background-color:\").concat(opts.colorRGB, \";width: 40px;\\\" ><img class=\\\"imageuser\\\" src=\\\"\").concat(opts.iconURL, \"\\\" alt=\\\"\").concat(opts.pseudoName, \"\\\"></div>\\n    \\n        <div class='comment-details'>\\n          <div class='comment-author'>\").concat(opts.pseudoName, \"</div>\\n        </div>\\n      </div>\\n      <div class='comment-body row' >\").concat(opts.comment, \"</div>\\n  \\n    </div>\"));\n      return cmtbox;\n    }\n  }, {\n    key: \"addFocusEffects\",\n    value: function addFocusEffects(divId) {\n      var _this = this;\n\n      console.log('#comment-box-' + divId);\n      $('#comment-box-' + divId).focusin(function () {\n        _this.commentBoxFocus(divId, 'in');\n      });\n      $('#comment-box-' + divId).focusout(function () {\n        _this.commentBoxFocus(divId, 'out');\n      });\n    }\n  }, {\n    key: \"saveComment\",\n    value: function () {\n      var _saveComment = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var comment, currentTimestamp;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                comment = this._commentInput.val();\n\n                this._commentInput.val('');\n\n                _context2.next = 4;\n                return this.getCurrentTimestamp();\n\n              case 4:\n                currentTimestamp = _context2.sent;\n                _context2.next = 7;\n                return this.addCommentToList({\n                  comment: comment,\n                  currentTimestamp: currentTimestamp,\n                  authorId: this._authorId\n                });\n\n              case 7:\n                this._commentCallback({\n                  comment: comment,\n                  currentTimestamp: currentTimestamp\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function saveComment() {\n        return _saveComment.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"commentBoxFocus\",\n    value: function commentBoxFocus(id, type) {\n      console.log(type, '.ql-comments #' + id);\n\n      if (type !== 'out') {\n        $('.ql-comments #' + id).addClass('commentFocus');\n\n        this._comments.find('.' + id).css('border-color', 'red');\n      } else {\n        $('.ql-comments #' + id).removeClass('commentFocus');\n\n        this._comments.find('.comment-box').css('border-color', '#F0F0F0');\n      }\n    }\n    /**\r\n     * UpdateComments This function to extract the comments form the editor and show them in #comments\r\n     */\n\n  }, {\n    key: \"UpdateComments\",\n    value: function UpdateComments() {\n      var _this2 = this;\n\n      debug('cmments updated'); // clear comments\n\n      this.clearComments(); // for each insert check att if it contains the author then insert comment\n\n      this.viewEditor.editor.delta.ops.forEach(function (op) {\n        if (op.insert && op.attributes && op.attributes.commentAuthor) {\n          var authorId = op.attributes.commentAuthor;\n          var comment = op.attributes.comment;\n          var currentTimestamp = op.attributes.commentTimestamp;\n\n          _this2.addCommentToList({\n            comment: comment,\n            currentTimestamp: currentTimestamp,\n            authorId: authorId\n          });\n        }\n      });\n    }\n  }, {\n    key: \"clearComments\",\n    value: function clearComments() {\n      jQuery(\"#\".concat(this._editorContainerID, \" #comments\")).empty();\n    }\n  }, {\n    key: \"viewEditor\",\n    get: function get() {\n      return this._viewEditor;\n    },\n    set: function set(Editor) {\n      this._viewEditor = Editor;\n    }\n  }]);\n\n  return Comments;\n}();","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { ImageDrop } from 'quill-image-drop-module'; //import { ImageResize } from 'quill-image-resize-module'\n\nimport { GUID } from '../helpers/randomID';\nexport var QuillManager =\n/*#__PURE__*/\nfunction () {\n  function QuillManager(editorContainerID, comments, editor) {\n    _classCallCheck(this, QuillManager);\n\n    this._editorContainerID = editorContainerID;\n    this._comments = comments;\n    this._editor = editor;\n  }\n\n  _createClass(QuillManager, [{\n    key: \"registerModules\",\n    value: function registerModules() {\n      Quill.register('modules/cursors', QuillCursors);\n      Quill.register('modules/comment', QuillComment);\n      Quill.register('modules/imageDrop', ImageDrop); //Quill.register('modules/imageResize', ImageResize);\n    }\n  }, {\n    key: \"getQuill\",\n    value: function getQuill() {\n      this.registerModules();\n      var quill = new Quill(\"#\".concat(this._editorContainerID, \" #editor\"), {\n        modules: {\n          formula: true,\n          toolbar: {\n            container: this.getToolbarOptions(),\n            handlers: {\n              subdocument: function subdocument(value) {\n                var range = this.quill.getSelection(); // let preview = this.quill.getText(range);\n\n                var preview = window.location.href.split('?')[0] + '?' + GUID();\n                var tooltip = this.quill.theme.tooltip;\n                tooltip.edit('link', preview);\n              },\n              undo: function undo(value) {\n                this.quill.history.undo();\n              },\n              redo: function redo(value) {\n                this.quill.history.redo();\n              }\n            }\n          },\n          cursors: this.getCursorModuleOptions(),\n          history: this.getHistoryModuleOptions(),\n          comment: this.getCommentsModuleOptions(),\n          imageDrop: true\n        },\n        theme: 'snow'\n      });\n      /** ImageResize: {\r\n            modules: [ 'Resize', 'DisplaySize', 'Toolbar' ],\r\n            handleStyles: {\r\n              backgroundColor: 'black',\r\n              border: 'none',\r\n              color: white\r\n              // other camelCase styles for size display\r\n          } */\n\n      this.addExtraToolbarOptions(); // hook changing the editor when click on save link ==> open in the document\n\n      quill.theme.tooltip.save2 = quill.theme.tooltip.save;\n      var self = this;\n\n      quill.theme.tooltip.save = function () {\n        quill.theme.tooltip.save2();\n\n        self._editor.convertLocalLinks();\n      };\n\n      return quill;\n    }\n  }, {\n    key: \"getToolbarOptions\",\n    value: function getToolbarOptions() {\n      var toolbarOptions = [[{\n        header: [1, 2, 3, 4, 5, 6, false]\n      }], [{\n        font: []\n      }], ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n      // custom button values\n      [{\n        align: []\n      }], [{\n        list: 'ordered'\n      }, {\n        list: 'bullet'\n      }], //  [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript\n      // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n\n      /* [{\r\n               'direction': 'rtl'\r\n             }], // text direction\r\n      \r\n             [{\r\n               'size': ['small', false, 'large', 'huge']\r\n             }], // custom dropdown*/\n      [{\n        color: []\n      }, {\n        background: []\n      }], // dropdown with defaults from theme\n      ['clean'], // remove formatting button\n\n      /*['blockquote', 'code-block'],*/\n      ['formula', 'image', 'link'], ['subdocument'], ['comments-toggle'], // comment color on/off\n      ['comments-add'] // comment add\n      ];\n      return toolbarOptions;\n    }\n  }, {\n    key: \"getCursorModuleOptions\",\n    value: function getCursorModuleOptions() {\n      var opts = {\n        autoRegisterListener: true,\n        // default: true\n        hideDelay: 500,\n        // default: 3000\n        hideSpeed: 0 // default: 400\n\n      };\n      return opts;\n    }\n  }, {\n    key: \"getHistoryModuleOptions\",\n    value: function getHistoryModuleOptions() {\n      var opt = {\n        delay: 500,\n        maxStack: 1000\n      };\n      return opt;\n    }\n  }, {\n    key: \"getCommentsModuleOptions\",\n    value: function getCommentsModuleOptions(comments, editorContainerID) {\n      var opts = {\n        enabled: true,\n        commentAuthorId: 123,\n        commentAddOn: 'Author Name',\n        // any additional info needed\n        color: 'yellow',\n        // comment background color in the text\n        commentAddClick: this._comments.commentAddClick,\n        // get called when `ADD COMMENT` btn on options bar is clicked\n        commentsClick: this._comments.commentsClick,\n        // get called when you click `COMMENTS` btn on options bar for you to do additional things beside color on/off. Color on/off is already done before the callback is called.\n        commentTimestamp: this._comments.getCurrentTimestamp,\n        containerID: this._editorContainerID\n      };\n      return opts;\n    }\n  }, {\n    key: \"addExtraToolbarOptions\",\n    value: function addExtraToolbarOptions() {\n      $('.ql-subdocument .ql-comments-toggle .ql-comments-add').attr('data-toggle', 'tooltip');\n      $('.ql-comments-toggle,.ql-comments-add').css({\n        position: 'relative',\n        top: '-5px'\n      });\n      $('.ql-subdocument').html('<strong>SUB</strong>');\n      $('.ql-subdocument').attr('title', 'Add subdocument');\n      $('.ql-comments-toggle').html('<i class=\"fa fa-comments\"></i>');\n      $('.ql-comments-toggle').attr('title', 'Show/hide comments');\n      $('.ql-comments-add').html('<i class=\"fa fa-comment\"></i>');\n      $('.ql-comments-add').attr('title', 'Add comment');\n    }\n  }]);\n\n  return QuillManager;\n}();","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport Marker from './marker';\nimport { EventEmitter } from \"events\";\n\nvar debug = require('debug')('CRATE:View:MarkerViewManager');\n/**\r\n * This class manages markers,pings,cursors of the different users\r\n */\n\n\nexport var MarkerViewManager =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(MarkerViewManager, _EventEmitter);\n\n  function MarkerViewManager(MarkerManager, editor) {\n    var _this;\n\n    _classCallCheck(this, MarkerViewManager);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MarkerViewManager).call(this));\n    /**\r\n     * markers contains all marks of the users: carets, avatars...\r\n     * @type {Marker[]}\r\n     */\n\n    _this._markerManager = MarkerManager;\n    _this._editor = editor;\n    _this._markers = {};\n\n    _this.addMarker(_this._markerManager._document.uid, true);\n\n    _this._markerManager.on(\"Ping_received\", function (msg) {\n      _this.receivePing(msg);\n    });\n\n    _this._markerManager.on(\"Caret_received\", function (msg) {\n      _this.receiveCaret(msg);\n    });\n\n    return _this;\n  }\n\n  _createClass(MarkerViewManager, [{\n    key: \"addMarker\",\n    value: function addMarker(id) {\n      var isItMe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var options = Object.assign(_objectSpread({}, this._defaultOptions, {\n        isItMe: isItMe\n      }), opts);\n\n      if (!this._markers.hasOwnProperty(id)) {\n        this._markers[id] = new Marker(id, options, this._editor);\n\n        if (isItMe) {\n          if (store.get('myId')) {\n            this._markers[id].setPseudo(store.get('myId').pseudo);\n          } else {\n            store.set('myId', {\n              id: id,\n              pseudo: this._markers[id].pseudoName\n            });\n          }\n        }\n      }\n\n      return this._markers[id];\n    }\n  }, {\n    key: \"getMarker\",\n    value: function getMarker(id) {\n      return this._markers[id];\n    }\n  }, {\n    key: \"receivePing\",\n    value: function receivePing(_ref) {\n      var id = _ref.id,\n          pseudo = _ref.pseudo;\n      debug('Ping Received', id, pseudo);\n\n      if (this.getMarker(id)) {\n        this.getMarker(id).update(null, false) // to keep avatar\n        .setPseudo(pseudo);\n      } else {\n        // to create the avatar\n        this.addMarker(id, false).setPseudo(pseudo);\n      }\n    }\n    /**\r\n       *  At the reception of CARET position\r\n       * @param  {[type]} range  [description]\r\n       * @param  {[type]} id [description]\r\n       * @return {[type]}        [description]\r\n       */\n\n  }, {\n    key: \"receiveCaret\",\n    value: function receiveCaret(_ref2) {\n      var range = _ref2.range,\n          id = _ref2.id;\n      if (!id) return;\n\n      if (this.getMarker(id)) {\n        this.getMarker(id).update(range, true); // to keep avatar\n      } else {\n        this.addMarker(id, false, {\n          range: range\n        });\n      }\n    }\n  }, {\n    key: \"removeMarker\",\n    value: function removeMarker() {}\n  }]);\n\n  return MarkerViewManager;\n}(EventEmitter);","import _objectSpread from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { Comments } from '../view/comments';\nimport { EventEmitter } from 'events';\nimport { QuillManager } from './QuillManger';\nimport { MarkerViewManager } from './MarkerViewManager';\n\nvar debug = require('debug')('crate:view:editor');\n/**\r\n * EditorController this the link between the core functions and the interface.\r\n */\n\n\nexport var EditorController =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(EditorController, _EventEmitter);\n\n  /**\r\n   * [constructor description]\r\n   * @param  {[doc]} document  this is the object that contains all proprieties of a document.\r\n   * @param  {[string]} sessionID [description]\r\n   */\n  function EditorController(document, sessionID, editorContainerID) {\n    var _this;\n\n    _classCallCheck(this, EditorController);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditorController).call(this));\n    /**\r\n     * this is the object that contains all proprieties of a document.\r\n     * @type {[doc]}\r\n     */\n\n    _this._document = document;\n    /**\r\n     *  ViewEditor the used editor, here it is Quill editor\r\n     *  @see  https://quilljs.com/\r\n     * @type {Quill}\r\n     */\n\n    _this._editorContainerID = editorContainerID;\n    _this._comments = {};\n    _this._sessionID = sessionID;\n    return _this;\n  }\n  /**\r\n   * loadDocument load the document if it exist in the local storage\r\n   * @param {string} sessionID the session ID of the document\r\n   * @return {[type]} [description]\r\n   */\n\n\n  _createClass(EditorController, [{\n    key: \"loadDocument\",\n    value: function loadDocument() {\n      this._comments = new Comments(this);\n      this._quillManager = new QuillManager(this._editorContainerID, this._comments, this);\n      this.viewEditor = this._quillManager.getQuill();\n    }\n  }, {\n    key: \"initDocument\",\n    value: function initDocument() {\n      this.loadDocument();\n      this.initCommunicationModules();\n      this.loadLocalContent(this._sessionID);\n\n      this._comments.init(this).addAuthorInformation().UpdateComments();\n\n      this.startEventListeners();\n    }\n  }, {\n    key: \"initCommunicationModules\",\n    value: function initCommunicationModules() {\n      this.markerManager = this._document._communication.markerManager;\n      this.textManager = this._document._communication.textManager;\n      this._MarkerViewManager = new MarkerViewManager(this.markerManager, this);\n    }\n    /**\r\n     * load content from localStorage if it exist\r\n     * @param {*} sessionID\r\n     */\n\n  }, {\n    key: \"loadLocalContent\",\n    value: function loadLocalContent() {\n      if (store.get('CRATE2-' + this._sessionID)) {\n        var doc = store.get('CRATE2-' + this._sessionID);\n        this.viewEditor.setContents(doc.delta, 'user');\n        jQuery(\"#\".concat(this._editorContainerID, \" #title\")).text(doc.title);\n        this.convertLocalLinks(); // this is to convert the links to inside links\n      }\n    }\n    /**\r\n     * Start all the event listeners related to the editor\r\n     */\n\n  }, {\n    key: \"startEventListeners\",\n    value: function startEventListeners() {\n      var _this2 = this;\n\n      // Local events\n      this.viewEditor.on('selection-change', function (range, oldRange, source) {\n        if (range) {\n          _this2.markerManager.caretMoved(range);\n        }\n      });\n      this.viewEditor.on('text-change', function (delta, oldDelta, source) {\n        _this2.textChange(delta, oldDelta, source);\n\n        _this2.emit('thereAreChanges');\n      }); // Remote events\n\n      this.textManager._insertManager.on('remoteInsert', function (element, indexp) {\n        _this2.remoteInsert(element, indexp);\n\n        _this2.emit('thereAreChanges');\n      });\n\n      this.textManager._removeManager.on('remoteRemove', function (index) {\n        _this2.remoteRemove(index);\n\n        _this2.emit('thereAreChanges');\n      }); //At the reception of Title changed operation\n\n\n      this.textManager._titleManager.on('changeTitle', function (title) {\n        jQuery(\"#\".concat(_this2._editorContainerID, \" #title\")).text(title);\n\n        _this2.emit('thereAreChanges');\n      });\n    }\n    /**\r\n     * textChange description\r\n     * @param  {[type]} delta    [description]\r\n     * @param  {[type]} oldDelta [description]\r\n     * @param  {[type]} source   [description]\r\n     * @listens editor content changes\r\n     * @return {[type]}          [description]\r\n     */\n\n  }, {\n    key: \"textChange\",\n    value: function textChange(delta, oldDelta, source) {\n      this.applyChanges(delta, 0);\n    }\n    /**\r\n     * applyChanges Send delta object with attributes character by character starting from  the position \"iniRetain\"  ]\r\n     * @param  {[type]} delta     [description]\r\n     * @param  {[type]} iniRetain [description]\r\n     * @return {[type]}           [description]\r\n     */\n\n  }, {\n    key: \"applyChanges\",\n    value: function applyChanges(delta, iniRetain) {\n      var _this3 = this;\n\n      var start = iniRetain;\n      var Operations = this.getOperations(delta);\n      Operations.map(function (operation) {\n        start = _this3.sendIt(operation, start, false);\n      });\n    }\n    /**\r\n     * sendIt Send the changes character by character\r\n     * @param  {[type]}  text              [description]\r\n     * @param  {[type]}  operation.Attributes               [description]\r\n     * @param  {[type]}  start             [description]\r\n     * @param  {[type]}  operation.Value             [description]\r\n     * @param  {[type]}  operation.Name              [description]\r\n     * @param  {[type]}  start            [description]\r\n     * @param  {Boolean} isItInsertWithAtt [description]\r\n     * @return {[type]}                    [description]\r\n     */\n\n  }, {\n    key: \"sendIt\",\n    value: function sendIt(operation, start, isItInsertWithAtt) {\n      switch (operation.Name) {\n        case 'retain':\n          this.sendFormat(start, operation);\n          break;\n\n        case 'insert':\n          this.sendInsert(start, operation);\n          break;\n\n        case 'delete':\n          this.sendDelete(start, operation, isItInsertWithAtt);\n          break;\n      }\n\n      return this.getNextIndex(start, operation);\n    }\n  }, {\n    key: \"getNextIndex\",\n    value: function getNextIndex(index, operation) {\n      debug('getNextIndex', {\n        index: index,\n        operation: operation\n      });\n      var nextIndex = index;\n\n      if (operation.Name === 'insert' && operation.Type === 'text') {\n        nextIndex = index + operation.Value.length;\n      }\n\n      if (operation.Name === 'insert' && operation.Type != 'text') {\n        nextIndex = index + 1;\n      }\n\n      if (operation.Name === 'retain' && operation.Attributes === '') {\n        nextIndex = index + operation.Value;\n      }\n\n      debug('getNextIndex', {\n        nextIndex: nextIndex\n      });\n      return nextIndex;\n    }\n    /**inline operations */\n\n  }, {\n    key: \"isItBlock\",\n    value: function isItBlock(Attributes) {\n      var props = ['blockquote', 'header', 'indent', 'list', 'align', 'direction', 'code-block'];\n      var a = Object.getOwnPropertyNames(Attributes);\n      var found = false;\n      a.forEach(function (att) {\n        var index = props.indexOf(att);\n\n        if (index > -1) {\n          found = true;\n        }\n      });\n      return found;\n    }\n    /**\r\n    *   the value in this case is the end of format \r\n      insert the changed text with the new attributes\r\n     1 delete the changed text  from retain to value\r\n     If there is attributes than delete and then insert \r\n    * @param {*} operation \r\n    * @param {*} start \r\n    */\n\n  }, {\n    key: \"sendFormat\",\n    value: function sendFormat(start, operation) {\n      var _this4 = this;\n\n      if (operation.Attributes != '') {\n        var isItInsertWithAtt = true;\n        var s = start;\n        var length = operation.Value;\n        var blocAttributes = null;\n        /* if(this.isItBlock(operation.Attributes)&&s>0){\r\n          s-=1\r\n          blocAttributes=operation.Attributes\r\n          const range= this.viewEditor.getSelection()\r\n            if(range.index>=s){\r\n            s-=1\r\n          } else {\r\n            //length= s+operation.Value\r\n            s=range.index\r\n            length= s+operation.Value\r\n          }\r\n        }\r\n        */\n        // 2 Get delta of the insert text with attributes\n\n        var delta = this.getDelta(s, s + length);\n        var operations = this.getOperations(delta);\n        var insertOperations = operations.filter(function (op) {\n          return op.Name === 'insert';\n        });\n        insertOperations.map(function (op) {\n          if (_this4.isItComplete(op.Attributes)) {\n            var opp = op;\n\n            if (blocAttributes) {\n              opp.Attributes = _objectSpread({}, opp.Attributes, blocAttributes);\n            }\n\n            _this4.sendDelete(s, opp, isItInsertWithAtt);\n\n            s = _this4.sendInsert(s, opp);\n          }\n        });\n      }\n    }\n    /** sometimes we receive the attributes one by one if they are not complete yet we wait\r\n     * we have to specify the first attrubyte that appears and the their number\r\n     */\n\n  }, {\n    key: \"isItComplete\",\n    value: function isItComplete(attributes) {\n      if (attributes.hasOwnProperty('commentAuthor') && Object.keys(attributes).length < 5) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"sendInsert\",\n    value: function sendInsert(index, Operation) {\n      if (Operation.Type === 'text') {\n        this.sendCharByChar(Operation.Value, index);\n      } else {\n        this.insert(Operation.Type, Operation.Value, index);\n      }\n\n      return index + Operation.Length;\n    }\n  }, {\n    key: \"sendCharByChar\",\n    value: function sendCharByChar(text, index) {\n      for (var i = index; i < index + text.length; ++i) {\n        debug('send [%]', text[i - index]);\n        this.insert('char', text[i - index], i);\n      }\n    }\n  }, {\n    key: \"sendDelete\",\n    value: function sendDelete(index, operation, isItInsertWithAtt) {\n      debug('Send delete', index, operation, isItInsertWithAtt); //to ensure that the editor contains just \\n without any attributes\n\n      if (!isItInsertWithAtt) {\n        this._comments.UpdateComments();\n      } // Delete caracter by caracter\n\n\n      for (var i = index; i < index + operation.Length; ++i) {\n        this.textManager._removeManager.remove(index);\n      }\n    }\n  }, {\n    key: \"insert\",\n    value: function insert(type, content, position) {\n      var attributes = this.viewEditor.getFormat(position, 1);\n      var packet = {\n        type: type,\n        content: content,\n        attributes: attributes\n      };\n\n      this.textManager._insertManager.insert({\n        packet: packet,\n        position: position\n      });\n\n      if (Object.keys(attributes).length > 0) {\n        this.updateCommentsLinks();\n      }\n    }\n    /**\r\n     * remoteInsert At the reception of insert operation\r\n     * @param  {[type]} element [description]\r\n     * @param  {[type]} indexp  [description]\r\n     * @return {[type]}         [description]\r\n     */\n\n  }, {\n    key: \"remoteInsert\",\n    value: function remoteInsert(element, indexp) {\n      var index = indexp - 1;\n      debug('Remote Insert : ', element, index);\n\n      if (index !== -1) {\n        if (element.type === 'char') {\n          this.viewEditor.insertText(index, element.content, element.attributes, 'silent');\n\n          if (element.content != '\\n') {\n            this.viewEditor.removeFormat(index, 1, 'silent');\n          }\n        } else {\n          this.viewEditor.insertEmbed(index, element.type, element.content[element.type], 'silent');\n        }\n\n        if (element.attributes) {\n          if (element.text != '\\n') {\n            this.viewEditor.formatLine(index, element.attributes, 'silent');\n            this.viewEditor.formatText(index, 1, element.attributes, 'silent');\n          }\n\n          this.updateCommentsLinks();\n        }\n      }\n    }\n    /**\r\n     * remoteRemove At the reception of remove operation\r\n     * @param  {[type]} index [description]\r\n     * @return {[type]}       [description]\r\n     */\n\n  }, {\n    key: \"remoteRemove\",\n    value: function remoteRemove(index) {\n      debug('Remote remove : ', index);\n      var removedIndex = index - 1;\n\n      if (removedIndex !== -1) {\n        this.viewEditor.deleteText(removedIndex, 1, 'silent');\n        this.updateCommentsLinks();\n      }\n    }\n  }, {\n    key: \"getDelta\",\n    value: function getDelta(start, end) {\n      return this.viewEditor.editor.delta.slice(start, end);\n    }\n  }, {\n    key: \"updateCommentsLinks\",\n    value: function updateCommentsLinks() {\n      var _this5 = this;\n\n      clearTimeout(this._timeout);\n      this._timeout = setTimeout(function () {\n        console.log('update comments and links');\n\n        _this5.convertLocalLinks();\n\n        _this5._comments.UpdateComments();\n      }, 500);\n    }\n  }, {\n    key: \"convertLocalLinks\",\n    value: function convertLocalLinks() {\n      var _this6 = this;\n\n      console.log(\"#\".concat(this._document._view._editorContainerID, \" a\"));\n      $(\"#\".concat(this._document._view._editorContainerID, \" a\")).toArray().filter(function (link) {\n        return link.href.includes('#/document/') || link.href.includes('#') || link.className === 'CrateSessionID';\n      }).forEach(function (link) {\n        _this6.updateLink(link);\n      });\n    }\n  }, {\n    key: \"updateLink\",\n    value: function updateLink(l) {\n      var _this7 = this;\n\n      var link = $(l);\n      var documentId = link.attr('id') || link.attr('href').split('?')[1];\n      link.attr('href', '#');\n      link.attr('id', documentId);\n      link.attr('class', 'CrateSessionID');\n      link.attr('data-toggle', 'Open this document');\n      link.addClass('CrateSessionID');\n      link.click(function () {\n        _this7._document.createNewDocument(documentId);\n      });\n    }\n  }, {\n    key: \"getAllLinksToCrate\",\n    value: function getAllLinksToCrate() {\n      var linksToCrate = [];\n      var links = $(\"#\".concat(this._document._view._editorContainerID, \" a\"));\n      debugger;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = links[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var l = _step.value;\n          var link = $(l);\n\n          if (l.href.includes(window.location.href.split('#')[0] + '#/document/') || l.className.includes('CrateSessionID')) {\n            linksToCrate.push(link);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return linksToCrate;\n    }\n  }, {\n    key: \"getOperations\",\n    value: function getOperations(changesDelta) {\n      var _this8 = this;\n\n      var operations = changesDelta.ops.map(function (op) {\n        return _this8.extractOperationInformation(op);\n      });\n      return operations;\n    }\n  }, {\n    key: \"extractOperationInformation\",\n    value: function extractOperationInformation(op) {\n      var operation = Object.keys(op);\n      var Name = '';\n      var Attributes = '';\n      var Value = '';\n      var Length = 1; // extract attributes from the operation in the case of there existance\n\n      for (var i = operation.length - 1; i >= 0; i--) {\n        var v = op[operation[i]];\n\n        if (operation[i] === 'attributes') {\n          Attributes = v;\n        } else {\n          Name = operation[i];\n          Value = v;\n        }\n      }\n\n      var Type = this.getTypeOfContent(Value);\n\n      if (Name === 'delete') {\n        Length = Value;\n      } else if (Type === 'text') {\n        Length = Value.length;\n      }\n\n      debug('extractOperationInformation', {\n        Name: Name,\n        Value: Value,\n        Attributes: Attributes,\n        Type: Type,\n        Length: Length\n      });\n      return {\n        Name: Name,\n        Value: Value,\n        Attributes: Attributes,\n        Type: Type,\n        Length: Length\n      };\n    }\n  }, {\n    key: \"getTypeOfContent\",\n    value: function getTypeOfContent(value) {\n      if (value.formula != undefined) return 'formula';\n      if (value.video != undefined) return 'video';\n      if (value.image != undefined) return 'image';\n      return 'text';\n    }\n  }]);\n\n  return EditorController;\n}(EventEmitter);","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n\n/**This class is to add functions for the main class when display is true */\nexport var CrateDecorator =\n/*#__PURE__*/\nfunction () {\n  function CrateDecorator() {\n    _classCallCheck(this, CrateDecorator);\n  }\n\n  _createClass(CrateDecorator, null, [{\n    key: \"addMoveShortcuts\",\n\n    /**\r\n     * add ctrl+left arrow and ctrl+right arrow shortcuts for the editor\r\n     * @param crate  crate instance\r\n     */\n    value: function addMoveShortcuts(crate) {\n      // custom prev next page event\n      if (!crate.addMoveShortcuts) {\n        crate.addMoveShortcuts = function () {\n          var _this = this;\n\n          var codes = {\n            37: 'prev',\n            39: 'next'\n          };\n          document.addEventListener && // Modern browsers only\n          document.addEventListener('keydown', function (e) {\n            var code = codes[e.keyCode];\n\n            if ((e.ctrlKey || e.metaKey) && code) {\n              var evt = document.createEvent('Event');\n              evt.initEvent(code, true, false);\n              e.target.dispatchEvent(evt); // dispatch on current target. Event will bubble up to window\n\n              e.preventDefault(); // opera defaut fix\n            }\n          }, false);\n          $(document).on('next', function () {\n            console.log('nnnnnext');\n\n            _this.moveToNext();\n          });\n          $(document).on('prev', function () {\n            console.log('pppppprev');\n\n            _this.moveToPrevious();\n          });\n        };\n\n        crate.addMoveShortcuts();\n      }\n    }\n    /**\r\n     * add the resize event to focus always on the specific editor\r\n     * @param {*} crate\r\n     */\n\n  }, {\n    key: \"addResize\",\n    value: function addResize(crate) {\n      if (!crate.Resize) {\n        crate.resize = function () {\n          var _this2 = this;\n\n          this.resizeTimeout;\n          $(window).resize(function () {\n            clearTimeout(_this2.resizeTimeout);\n            _this2.resizeTimeout = setTimeout(function () {\n              _this2.focusInToDocument(_this2.actualSessionIndex);\n\n              clearTimeout(_this2.resizeTimeout);\n              console.log('resiiize');\n            }, 200);\n          });\n        };\n\n        crate.resize();\n      }\n    }\n  }]);\n\n  return CrateDecorator;\n}();","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { LinkView } from './view/link.js';\nimport { StatesHeader } from './view/statesheader.js';\nimport { EditorController } from './view/editor';\nimport { CrateDecorator } from './view/CrateDecorator';\nexport var View =\n/*#__PURE__*/\nfunction () {\n  function View(options, document, editorsContainerID) {\n    var _this = this;\n\n    _classCallCheck(this, View);\n\n    this._options = options;\n    this._document = document;\n    this.crate = this._document.crate;\n    this._editorsHolderID = editorsContainerID;\n    this._editorContainerID = \"container-\".concat(this._options.signalingOptions.session);\n\n    this._document.on('FocusIn', function () {\n      _this.focusIn();\n    });\n\n    this._document.on('FocusOut', function () {\n      _this.focusOut();\n    });\n\n    this._document.on('UpdateView', function (NumberOfDocuments) {\n      console.log('UpdateView');\n\n      _this.updateView(NumberOfDocuments);\n    });\n\n    this.createCRATE();\n\n    if (this._options.storageServer) {\n      this._storageServerState = {};\n      this.findremote(true); // join if it is in the sleeping mode to download the last version of the document\n\n      this._timerStorageServer = setInterval(function () {\n        return _this.findremote();\n      }, 5000);\n    }\n\n    var sessionID = this._options.signalingOptions.session;\n    /*TODO:\r\n    session.default.getCrateSession(sessionID).goTo(sessionID)\r\n    */\n    //TODO:this.viewEditor.focus()\n\n    this._editor = new EditorController(this._document, this._options.signalingOptions.session, this._editorContainerID);\n    CrateDecorator.addMoveShortcuts(this.crate);\n    CrateDecorator.addResize(this.crate);\n  }\n\n  _createClass(View, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      //TODO: session.default.updateViews()\n      this._editor.initDocument();\n      /**\r\n       * if there are any changes local or remote then we have to wake up the storageServer\r\n       * @param  {[type]} \"thereAreChanges\" [description]\r\n       * @param  {[type]} (                 [description]\r\n       * @return {[type]}                   [description]\r\n       */\n\n\n      this._editor.on('thereAreChanges', function () {\n        if (_this2._storageServerState === 2) {\n          _this2.join();\n        }\n      });\n\n      $(window).resize(function () {\n        $('#comments').height($('#editor').height());\n      }); // make title editable\n\n      $(\"#\".concat(this._editorContainerID, \" #title\")).click(function () {\n        $(\"#\".concat(_this2._editorContainerID, \" #title\")).attr('contenteditable', 'true');\n        $(document).on('scroll touchmove mousewheel', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n          return false;\n        });\n      });\n      $(\"#\".concat(this._editorContainerID, \" #closeDocument\")).click(function () {\n        _this2.closeDocument();\n      }); //Menu Bar events\n\n      $(\"#\".concat(this._editorContainerID, \" #saveicon\")).click(function () {\n        _this2.saveDocument();\n      });\n      $(\"#\".concat(this._editorContainerID, \" #title\")).focusout(function () {\n        _this2.changeTitle(); //TODO: this.emit('thereAreChanges')\n\n      });\n      var sharingLinkContainer = new LinkView($(\"#\".concat(this._editorContainerID, \" #sharinglink\")));\n      var shareButton = $(\"#\".concat(this._editorContainerID, \" #shareicon\"));\n      this._statesHeader = new StatesHeader(this._document, sharingLinkContainer, shareButton, this._editorContainerID);\n    }\n  }, {\n    key: \"closeDocument\",\n    value: function closeDocument() {\n      this._document.close();\n    }\n  }, {\n    key: \"createCRATE\",\n    value: function createCRATE() {\n      var _this3 = this;\n\n      var html = \" \\n    <div class=\\\"col-md-10 editorContainer\\\" id=\\\"\".concat(this._editorContainerID, \"\\\" style=\\\"width:\").concat(this.getWidth(), \" !important\\\" >\\n  <!-- editorContent -->\\n      <div class=\\\"editorContent\\\">\\n          <!-- Head -->\\n          <div id=\\\"head\\\">\\n          \\n          </div><!-- Head -->\\n  \\n          <div id=\\\"firstrow\\\" class=\\\"row\\\">\\n  \\n              <div id=\\\"title\\\">\\n              \").concat(this._options.name, \"\\n                  </div>\\n  \\n                  <div id='menurow'>\\n                  <div id=\\\"features\\\">\\n                  <div id=\\\"shareicon\\\">\\n                  <i class=\\\"fa fa-link fa-2x ficon2\\\"></i>\\n                  </div>\\n                  <div id=\\\"saveicon\\\"><i class=\\\"fa fa-floppy-o fa-2x ficon2\\\"></i></div>\\n                  <div id=\\\"remotesave\\\">\\n                  <i class=\\\"fa fa-cloud fa-2x ficon2\\\"></i>\\n                  </div>\\n                  <div id=\\\"state\\\">\\n                  <i class=\\\"fa fa-globe fa-2x ficon2 \\\"></i>\\n              </div>\\n              \\n                  <div id=\\\"closeDocument\\\">\\n                  <i class=\\\"fa fa-times-circle fa-2x ficon2\\\" style=\\\"\\n              \\\" aria-hidden=\\\"true\\\" ></i>\\n                  </div>\\n              </div>\\n              </div>\\n              <div id='sharingContainer'> \\n              </div>\\n          </div>\\n          \\n          <!-- Content -->\\n          <div id=\\\"content\\\" class=\\\"content\\\">\\n              <div id=\\\"users\\\" class=\\\"row\\\">\\n              </div>\\n              <div id=\\\"editorSection\\\">\\n              <div id=\\\"editor\\\" class=\\\"editor\\\">\\n              </div>\\n              <div id=\\\"comments\\\">\\n              </div>\\n              </div>\\n          </div><!-- Content -->\\n  \\n          <!-- inputCommentModal -->\\n          <div id=\\\"inputCommentModal\\\" class=\\\"modal fade\\\" role=\\\"dialog\\\" style=\\\"display: none;\\\">\\n              <div class=\\\"modal-dialog\\\">\\n          \\n                  <!-- Modal content-->\\n                  <div class=\\\"modal-content\\\">\\n                      <div class=\\\"modal-body\\\">\\n                      <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">\\xD7</button>\\n                      <h4>Comment</h4>\\n                      <p><textarea name=\\\"commentInput\\\" id=\\\"commentInput\\\" style=\\\"width: 100%;\\\" rows=\\\"5\\\"></textarea></p>\\n                      </div>\\n                      <div class=\\\"modal-footer\\\">\\n                      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" id=\\\"saveComment\\\"data-dismiss=\\\"modal\\\">Save</button>\\n                      </div>\\n                  </div>\\n              \\n              </div>\\n          </div><!-- inputCommentModal -->\\n      </div><!-- editorContent -->\\n  </div>\\n    \");\n      var editorContainer = $(\"#\".concat(this._editorsHolderID));\n      editorContainer.append(html);\n      $(\"#\".concat(this._editorContainerID, \" #saveComment\")).click(function () {\n        _this3.saveComment();\n      });\n      $(\"#\".concat(this._editorContainerID, \" #remotesave\")).click(function () {\n        if ($(\"#\".concat(_this3._editorContainerID, \" #remotesave\")).hasClass('PIN')) {\n          _this3.kill();\n        } else {\n          _this3.join();\n        }\n      });\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      var width = 100;\n      var scrollWidth = 0;\n\n      var NumberOfDocuments = this._document.crate.getNumberOfDocuments();\n\n      if (NumberOfDocuments > 1) {\n        width = 50;\n        scrollWidth = scrollWidth / 2;\n      }\n\n      return \"calc(\".concat(width, \"vw - \").concat(scrollWidth, \"px)\");\n    }\n  }, {\n    key: \"saveComment\",\n    value: function saveComment() {\n      this._editor._comments.saveComment();\n    }\n    /**\r\n     * saveDocument save the document in local storage\r\n     * @return {[type]} [description]\r\n     */\n\n  }, {\n    key: \"saveDocument\",\n    value: function saveDocument() {\n      if (this._document.saveDocument()) alert('Document is saved successfully');else alert('There is a problem is saving the document');\n    }\n    /**\r\n     * changeTitle For any change in title, broadcast the new title\r\n     * @return {[type]} [description]\r\n     */\n\n  }, {\n    key: \"changeTitle\",\n    value: function changeTitle() {\n      $(document).unbind('scroll touchmove mousewheel');\n      $(\"#\".concat(this._editorContainerID, \" #title\")).attr('contenteditable', 'false');\n\n      if ($(\"#\".concat(this._editorContainerID, \" #title\")).text() == '') {\n        $(\"#\".concat(this._editorContainerID, \" #title\")).text('Untitled document');\n      } //TODO: Optimize change only if the text is changed from last state\n\n\n      this._document._communication.textManager._titleManager.sendChangeTitle($(\"#\".concat(this._editorContainerID, \" #title\")).text());\n    }\n  }, {\n    key: \"focusOut\",\n    value: function focusOut() {\n      $(\"#container-\".concat(this._document.documentId)).removeClass('activeEditor');\n      console.log('FocusOuT', this._document.documentId);\n    }\n  }, {\n    key: \"focusIn\",\n    value: function focusIn() {\n      $(\"#container-\".concat(this._document.documentId)).addClass('activeEditor');\n      var moveToIndex = this._document.documentIndex;\n\n      if (moveToIndex >= 1) {\n        moveToIndex--;\n      }\n\n      var moveToDocumentId = this._document.crate.getDocumentIdFromIndex(moveToIndex);\n\n      if (this._document.crate.getNumberOfDocuments() > 1) {\n        $('html, body').animate({\n          scrollLeft: $(\"#container-\".concat(moveToDocumentId)).offset().left\n        }, 'slow');\n      }\n\n      this._editor.viewEditor.focus();\n    }\n  }, {\n    key: \"updateView\",\n    value: function updateView(numberOfDocuments) {\n      console.log('uodateView', this._document.documentId);\n      $(\"#\".concat(this._editorContainerID)).css('cssText', \"width:\".concat(this.getWidth(), \" !important\"));\n\n      if (numberOfDocuments > 1) {\n        jQuery(\"#content-default\").css('cssText', \"width:calc(\".concat(this.getWidth(), \" * \").concat(numberOfDocuments, \") !important\"));\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      clearInterval(this._timerStorageServer);\n\n      for (var marker in this._editor.markers) {\n        clearInterval(marker.timer);\n      } // remove it from the browser\n\n\n      $(\"#\".concat(this._editorContainerID)).remove();\n    } //TODO:Create a special class for remote session\n\n  }, {\n    key: \"findremote\",\n    value: function findremote(firsttime) {\n      var _this4 = this;\n\n      var sessionID = this._options.signalingOptions.session;\n      var remotesave = $(\"#\".concat(this._editorContainerID, \" #remotesave\")); // There is a configured server\n\n      if (this._options.storageServer) {\n        var url = this._options.storageServer + '/exist/' + sessionID;\n        fetch(url).then(function (resp) {\n          return resp.json();\n        }) // Transform the data into json\n        .then(function (data) {\n          _this4._storageServerState = data.results;\n\n          if (data.results == 0) {\n            _this4.unpin(remotesave);\n          } else if (data.results == 1) {\n            // the session is active on the server\n            _this4.pin(remotesave, 'active');\n          } else {\n            if (firsttime) {\n              _this4.join();\n            } else {\n              _this4.pin(remotesave, 'sleep');\n            }\n          }\n        }).catch(function (thrownError) {\n          console.log(thrownError);\n          clearInterval(_this4._timerStorageServer);\n\n          _this4.unpin(remotesave);\n        });\n      }\n    }\n  }, {\n    key: \"pin\",\n    value: function pin(remotesave, type) {\n      if (type === 'active') {\n        remotesave.css('color', 'green');\n      } else {\n        remotesave.css('color', 'gray');\n      }\n\n      remotesave.removeClass('UNPIN');\n      remotesave.addClass('PIN');\n    }\n  }, {\n    key: \"unpin\",\n    value: function unpin(remotesave) {\n      remotesave.css('color', 'red');\n      remotesave.removeClass('PIN');\n      remotesave.addClass('UNPIN');\n    }\n  }, {\n    key: \"join\",\n    value: function join() {\n      var _this5 = this;\n\n      var sessionID = this._options.signalingOptions.session;\n      $.ajax({\n        type: 'GET',\n        url: this._options.storageServer + '/join/' + sessionID,\n        success: function success(data, status) {\n          _this5.findremote();\n        },\n        error: function error() {\n          _this5.findremote();\n        },\n        async: true\n      });\n    }\n  }, {\n    key: \"kill\",\n    value: function kill() {\n      var _this6 = this;\n\n      var sessionID = this._options.signalingOptions.session;\n      var r = confirm('Do you want remove document from remote server!');\n\n      if (r == true) {\n        $.ajax({\n          type: 'GET',\n          url: this._options.storageServer + '/kill/' + sessionID,\n          success: function success(data, status) {\n            _this6.findremote(sessionID);\n          },\n          async: false\n        });\n      }\n    }\n  }]);\n\n  return View;\n}();","import _classCallCheck from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\haouari-n\\\\Desktop\\\\CrateV2\\\\reactcrate\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport animals from 'animals';\nimport hash from 'string-hash';\n\nvar debug = require('debug')('CRATE:Communication:MarkerManager:Marker');\n/**\r\n * Marker is class for managing the marker of one user,it includes the caret, avatar, and pseudo Names.\r\n */\n\n\nvar Marker =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * Marker Module manages the Carets, avatars, pseudo names for the different users of the document\r\n   * @param {[string]}  origin the id of the the user\r\n   * @param {Number}  lifeTime After this time, if no ping or Caret position is received =>\r\n   * remove caret and avatar. if lifetime is -1 we didn't add the avatar\r\n   * @param {[{index: index,length: 0}]}  range  range stars from index with the specified length\r\n   * @param {[cursor module]}  cursorsp the used cursor module for quilljs\r\n   * @param {[Boolean]}  cursor  create the caret or not. If it is from ping, it will be false else true\r\n   * @param {Boolean} isItME  is it my caret ? true or false to disable the time if it is true\r\n   */\n  function Marker(origin, options, editor) {\n    _classCallCheck(this, Marker);\n\n    //lifeTime = -1, range, cursorsp, cursor, isItME = false, editor) {\n    if (origin === undefined) {\n      console.error('origin not defined', origin);\n    }\n\n    if (editor === undefined) {\n      console.error('editor not defined', editor);\n    }\n\n    if (Object.keys(editor).length === 0 && editor.constructor === Object) {\n      console.error('editor is empty', editor);\n    }\n\n    if (options == null) {\n      var options = {\n        lifeTime: -1,\n        range: {},\n        cursor: false,\n        isItME: false\n      };\n    }\n    /**\r\n     *  origin the id of the the user\r\n     * @type {[type]}\r\n     */\n\n\n    this.options = options;\n    this.origin = origin;\n    /**\r\n     * lifeTime After this time, if no ping or Caret position is received =>\r\n     * remove caret and avatar. if lifetime is -1 we don't add the avatar\r\n     * @type {[type]}\r\n     */\n\n    this.lifeTime = options.lifeTime;\n    /**\r\n     * used to store last update time to detected outdated users\r\n     * @type {Date}\r\n     */\n\n    this.time = new Date().getTime();\n    /**\r\n     * color rgb(r,g,b)\r\n     * @type {String}\r\n     */\n\n    this.colorRGB = this.constructor.getColor(this.origin, 'rgb');\n    /**\r\n     *  color rgba(r,g,b,0.5)\r\n     * @type {String}\r\n     */\n\n    this.colorRGBLight = this.constructor.getColor(this.origin, 'rgba');\n    /**\r\n     * auto generated pseudo name (from animals list)\r\n     * @type {[type]}\r\n     */\n\n    this.animal = this.constructor.getPseudoname(this.origin, null);\n    /**\r\n     * Anonymous + auto generated pseudo name\r\n     * @type {String}\r\n     */\n\n    this.pseudoName = this.constructor.getPseudoname(this.origin);\n    /**\r\n     * add or not the avatar\r\n     * @type {Boolean}\r\n     */\n\n    this.avatarAdd = false;\n    /**\r\n     * true for an editor, false if it is from a ping\r\n     * @type {[type]}\r\n     */\n\n    this.cursor = options.cursor;\n    this._editor = editor;\n\n    if (editor) {\n      this._editorContainerID = editor._editorContainerID;\n    }\n\n    if (this.lifeTime != -1) {\n      // -1 => created without timer avatar cursor\n      if (options.isItMe) {\n        this.addAvatar();\n      } else if (this.cursor) {\n        this.addCursor(options.range);\n      }\n    }\n  }\n  /**\r\n   * capitalize uppercase the first letter\r\n   * @param  {[string]} s [string]\r\n   * @return {[string]}   [String the first letter is in uppercase]\r\n   */\n\n\n  _createClass(Marker, [{\n    key: \"update\",\n\n    /**\r\n     * update the time to keep the avatar and cursor if it exist\r\n     * @param  {[{index: index,length: 0}]} range  [description]\r\n     * @param  {[boolean]} cursor [if it is true add update the caret position]\r\n     */\n    value: function update(range, cursor) {\n      this.time = new Date().getTime();\n      var editor = $(\"#\".concat(this._editorContainerID));\n      var avatar = $(\"#\".concat(this._editorContainerID, \" #\").concat(this.origin));\n\n      if (!avatar.length && editor.length) {\n        this.addAvatar();\n      }\n\n      if (this.avatarAdd) {\n        avatar.attr('data-toggle', 'tooltip');\n        avatar.attr('title', this.pseudoName);\n      }\n\n      if (this.cursor == true && cursor == true) {\n        // in the case of update, make sure that ping updates don't change the range\n        this._editor.viewEditor.getModule('cursors').moveCursor(this.origin, range);\n      } else if (cursor == true) {\n        this.cursor = cursor;\n        this.addCursor(range);\n      }\n\n      return this;\n    }\n    /**\r\n     * checkIfOutdated check if the user is outdated and if it is the case remove its caret and avatar\r\n     */\n\n  }, {\n    key: \"checkIfOutdated\",\n    value: function checkIfOutdated() {\n      var timeNow = new Date().getTime();\n      var dff = timeNow - this.time; // if  cursor  is outdated\n\n      if (timeNow - this.time >= this.lifeTime) {\n        // Remve cursor and avatar\n        if (this.cursor) {\n          this._editor.viewEditor.getModule('cursors').removeCursor(this.origin);\n\n          this.cursor = false;\n        }\n\n        this.removeAvatar();\n        return true;\n      } else {\n        // jQuery(`#${this._editorContainerID} #${this.origin}`).css('opacity', (1 - ((timeNow - this.time) / this.lifeTime)));\n        return false;\n      }\n    }\n    /*\r\n     * addAvatar addAvatar of the user to the editor with corresponding divID\r\n     * @param {String} divID [the id of the div where the avatars are placed]\r\n     */\n\n  }, {\n    key: \"addAvatar\",\n    value: function addAvatar() {\n      var _this = this;\n\n      var divID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '#users';\n      jQuery(\"#\".concat(this._editorContainerID, \" \").concat(divID)).append(this.getAvatar());\n      var avatar = $(\"#\".concat(this._editorContainerID, \" #\").concat(this.origin));\n      avatar.attr('data-toggle', 'tooltip');\n      avatar.attr('title', this.pseudoName);\n      this.avatarAdd = true;\n\n      if (!this.options.isItMe) {\n        /**\r\n         * a timer that is used to check if the user is Outdated\r\n         * @return {[type]}   [description]\r\n         */\n        this.timer = setInterval(function () {\n          return _this.checkIfOutdated();\n        }, 1000);\n      }\n\n      return this;\n    }\n    /**\r\n     * getAvatar return a div that contains this user id\r\n     * @return {[type]} [description]\r\n     */\n\n  }, {\n    key: \"getAvatar\",\n    value: function getAvatar() {\n      var subDomain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      return '<div id=\"' + this.origin + '\"style=\"background-color:' + this.colorRGB + ';\"><img class=\"imageuser\" src=\"' + subDomain + '/icons/' + this.animal + '.png\" alt=\"' + this.pseudoName + '\"></div>';\n    }\n    /**\r\n     * getAvatar return the div that contains this user id\r\n     * @return {[type]} [description]\r\n     */\n\n  }, {\n    key: \"removeAvatar\",\n\n    /**\r\n     * removeAvatar remove the avatar of the user from the interface\r\n     * @return {[type]} [description]\r\n     */\n    value: function removeAvatar() {\n      var avatar = $(\"#\".concat(this._editorContainerID, \" #\").concat(this.origin));\n      avatar.remove();\n      this.avatarAdd = false;\n      clearInterval(this.timer);\n      return this;\n    }\n    /**\r\n     * setPseudo set pseudo  for the user\r\n     * @param {[type]} Pseudo [description]\r\n     */\n\n  }, {\n    key: \"setPseudo\",\n    value: function setPseudo(Pseudo) {\n      this.pseudoName = Pseudo;\n      var avatar = $(\"#\".concat(this._editorContainerID, \" #\").concat(this.origin));\n\n      if (avatar.length) {\n        avatar.attr('title', this.pseudoName);\n      }\n\n      return this;\n    }\n    /**\r\n     * addCursor add the cursor to the editor\r\n     * @param {[{index: index,length: 0}]} range [description]\r\n     */\n\n  }, {\n    key: \"addCursor\",\n    value: function addCursor(range) {\n      this.cursor = true;\n\n      this._editor.viewEditor.getModule('cursors').setCursor(this.origin, range, this.pseudoName, this.colorRGB);\n\n      return this;\n    }\n  }], [{\n    key: \"capitalize\",\n    value: function capitalize(s) {\n      return s.charAt(0).toUpperCase() + s.slice(1);\n    }\n    /**\r\n     * getColor for a specific id, get a unique color\r\n     * @param  {[string]} str [the id of the user]\r\n     * @return {[(r,g,b))]}     [the corresponding rgb color]\r\n     */\n\n  }, {\n    key: \"getColor\",\n    value: function getColor(str) {\n      var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'rgb';\n      var h1 = hash(str) % 206;\n      var h2 = h1 * 7 % 206;\n      var h3 = h1 * 11 % 206;\n      var color = Math.floor(h1 + 50) + ', ' + Math.floor(h2 + 50) + ', ' + Math.floor(h3 + 50);\n\n      if (format === 'rgb') {\n        return 'rgb(' + color + ')';\n      }\n\n      if (format === 'rgba') {\n        return 'rgba(' + color + ')';\n      }\n\n      return color;\n    }\n  }, {\n    key: \"getPseudoname\",\n    value: function getPseudoname(id) {\n      var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Anonymous';\n\n      if (format === 'Anonymous') {\n        return 'Anonymous ' + this.capitalize(animals.words[hash(id) % animals.words.length]);\n      }\n\n      return animals.words[hash(id) % animals.words.length];\n    }\n  }, {\n    key: \"getAvatar\",\n    value: function getAvatar(id) {\n      var subDomain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      return '<div id=\"' + id + '\"style=\"background-color:' + this.getColor(id, 'rgb') + ';\"><img class=\"imageuser\" src=\"' + subDomain + '/icons/' + this.getPseudoname(id, null) + '.png\" alt=\"' + this.getPseudoname(id) + '\"></div>';\n    }\n  }]);\n\n  return Marker;\n}();\n\nexport { Marker as default };"],"sourceRoot":""}